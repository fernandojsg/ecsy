!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e=e||self,function(){var n=e.ECSY,o=e.ECSY={};t(o),o.noConflict=function(){return e.ECSY=n,o}}())}(this,(function(exports){"use strict";class SystemManager{constructor(e){this._systems=[],this._executeSystems=[],this.world=e,this.lastExecutedSystem=null}registerSystem(e,t){if(void 0!==this._systems.find(t=>t.constructor.name===e.name))return console.warn(`System '${e.name}' already registered.`),this;var n=new e(this.world,t);return n.init&&n.init(),n.order=this._systems.length,this._systems.push(n),n.execute&&(this._executeSystems.push(n),this.sortSystems()),this}sortSystems(){this._executeSystems.sort((e,t)=>e.priority-t.priority||e.order-t.order)}getSystem(e){return this._systems.find(t=>t instanceof e)}getSystems(){return this._systems}removeSystem(e){var t=this._systems.indexOf(e);~t&&this._systems.splice(t,1)}executeSystem(e,t,n){if(e.initialized&&e.canExecute()){let o=performance.now();e.execute(t,n),e.executeTime=performance.now()-o,this.lastExecutedSystem=e,e.clearEvents()}}stop(){this._executeSystems.forEach(e=>e.stop())}execute(e,t,n){this._executeSystems.forEach(o=>(n||o.enabled)&&this.executeSystem(o,e,t))}stats(){for(var e={numSystems:this._systems.length,systems:{}},t=0;t<this._systems.length;t++){var n=this._systems[t],o=e.systems[n.constructor.name]={queries:{}};for(var s in n.ctx)o.queries[s]=n.ctx[s].stats()}return e}}class EventDispatcher{constructor(){this._listeners={},this.stats={fired:0,handled:0}}addEventListener(e,t){let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){return void 0!==this._listeners[e]&&-1!==this._listeners[e].indexOf(t)}removeEventListener(e,t){var n=this._listeners[e];if(void 0!==n){var o=n.indexOf(t);-1!==o&&n.splice(o,1)}}dispatchEvent(e,t,n){this.stats.fired++;var o=this._listeners[e];if(void 0!==o)for(var s=o.slice(0),i=0;i<s.length;i++)s[i].call(this,t,n)}resetCounters(){this.stats.fired=this.stats.handled=0}}function getName(e){return e.name}function componentPropertyName(e){return getName(e)}function queryKey(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];if("object"==typeof o){var s="not"===o.operator?"!":o.operator;t.push(s+getName(o.Component))}else t.push(getName(o))}return t.sort().join("-")}class Query{constructor(e,t){if(this.Components=[],this.NotComponents=[],e.forEach(e=>{"object"==typeof e?this.NotComponents.push(e.Component):this.Components.push(e)}),0===this.Components.length)throw new Error("Can't create a query without components");this.entities=[],this.eventDispatcher=new EventDispatcher,this.reactive=!1,this.key=queryKey(e);for(var n=0;n<t._entities.length;n++){var o=t._entities[n];this.match(o)&&(o.queries.push(this),this.entities.push(o))}}addEntity(e){e.queries.push(this),this.entities.push(e),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_ADDED,e)}removeEntity(e){let t=this.entities.indexOf(e);~t&&(this.entities.splice(t,1),t=e.queries.indexOf(this),e.queries.splice(t,1),this.eventDispatcher.dispatchEvent(Query.prototype.ENTITY_REMOVED,e))}match(e){return e.hasAllComponents(this.Components)&&!e.hasAnyComponents(this.NotComponents)}toJSON(){return{key:this.key,reactive:this.reactive,components:{included:this.Components.map(e=>e.name),not:this.NotComponents.map(e=>e.name)},numEntities:this.entities.length}}stats(){return{numComponents:this.Components.length,numEntities:this.entities.length}}}Query.prototype.ENTITY_ADDED="Query#ENTITY_ADDED",Query.prototype.ENTITY_REMOVED="Query#ENTITY_REMOVED",Query.prototype.COMPONENT_CHANGED="Query#COMPONENT_CHANGED";var nextId=0;class Entity{constructor(e){this._world=e||null,this.id=nextId++,this._ComponentTypes=[],this._components={},this._componentsToRemove={},this.queries=[],this._ComponentTypesToRemove=[],this.alive=!1}getComponent(e,t){var n=this._components[e.name];return n||!0!==t||(n=this._componentsToRemove[e.name]),n}getRemovedComponent(e){return this._componentsToRemove[e.name]}getComponents(){return this._components}getComponentsToRemove(){return this._componentsToRemove}getComponentTypes(){return this._ComponentTypes}getMutableComponent(e){for(var t=this._components[e.name],n=0;n<this.queries.length;n++){var o=this.queries[n];o.reactive&&-1!==o.Components.indexOf(e)&&o.eventDispatcher.dispatchEvent(Query.prototype.COMPONENT_CHANGED,this,t)}return t}addComponent(e,t){return this._world.entityAddComponent(this,e,t),this}removeComponent(e,t){return this._world.entityRemoveComponent(this,e,t),this}hasComponent(e,t){return!!~this._ComponentTypes.indexOf(e)||!0===t&&this.hasRemovedComponent(e)}hasRemovedComponent(e){return!!~this._ComponentTypesToRemove.indexOf(e)}hasAllComponents(e){for(var t=0;t<e.length;t++)if(!this.hasComponent(e[t]))return!1;return!0}hasAnyComponents(e){for(var t=0;t<e.length;t++)if(this.hasComponent(e[t]))return!0;return!1}removeAllComponents(e){return this._world.entityRemoveAllComponents(this,e)}reset(){this.id=nextId++,this._world=null,this._ComponentTypes.length=0,this.queries.length=0,this._components={}}remove(e){return this._world.removeEntity(this,e)}}class ObjectPool{constructor(e,t){this.freeList=[],this.count=0,this.T=e,this.isObjectPool=!0;var n=null;arguments.length>1&&(n=Array.prototype.slice.call(arguments)).shift(),this.createElement=n?()=>new e(...n):()=>new e,void 0!==t&&this.expand(t)}aquire(){return this.freeList.length<=0&&this.expand(Math.round(.2*this.count)+1),this.freeList.pop()}release(e){e.reset(),this.freeList.push(e)}expand(e){for(var t=0;t<e;t++)this.freeList.push(this.createElement());this.count+=e}totalSize(){return this.count}totalFree(){return this.freeList.length}totalUsed(){return this.count-this.freeList.length}}class QueryManager{constructor(e){this._world=e,this._queries={}}onEntityRemoved(e){for(var t in this._queries){var n=this._queries[t];-1!==e.queries.indexOf(n)&&n.removeEntity(e)}}onEntityComponentAdded(e,t){for(var n in this._queries){var o=this._queries[n];~o.NotComponents.indexOf(t)&&~o.entities.indexOf(e)?o.removeEntity(e):~o.Components.indexOf(t)&&o.match(e)&&!~o.entities.indexOf(e)&&o.addEntity(e)}}onEntityComponentRemoved(e,t){for(var n in this._queries){var o=this._queries[n];~o.NotComponents.indexOf(t)&&!~o.entities.indexOf(e)&&o.match(e)?o.addEntity(e):~o.Components.indexOf(t)&&~o.entities.indexOf(e)&&!o.match(e)&&o.removeEntity(e)}}getQuery(e){var t=queryKey(e),n=this._queries[t];return n||(this._queries[t]=n=new Query(e,this._world)),n}stats(){var e={};for(var t in this._queries)e[t]=this._queries[t].stats();return e}}class SystemStateComponent{}SystemStateComponent.isSystemStateComponent=!0;class EntityManager{constructor(e){this.world=e,this.componentsManager=e.componentsManager,this._entities=[],this._entitiesByNames={},this._queryManager=new QueryManager(this),this.eventDispatcher=new EventDispatcher,this._entityPool=new ObjectPool(Entity),this.entitiesWithComponentsToRemove=[],this.entitiesToRemove=[],this.deferredRemovalEnabled=!0,this.numStateComponents=0}getEntityByName(e){return this._entitiesByNames[e]}createEntity(e){var t=this._entityPool.aquire();return t.alive=!0,t.name=e||"",e&&(this._entitiesByNames[e]?console.warn(`Entity name '${e}' already exist`):this._entitiesByNames[e]=t),t._world=this,this._entities.push(t),this.eventDispatcher.dispatchEvent(ENTITY_CREATED,t),t}entityAddComponent(e,t,n){if(!~e._ComponentTypes.indexOf(t)){e._ComponentTypes.push(t),t.__proto__===SystemStateComponent&&this.numStateComponents++;var o=this.world.componentsManager.getComponentsPool(t).aquire();if(e._components[t.name]=o,n)if(o.copy)o.copy(n);else for(var s in n)o[s]=n[s];this._queryManager.onEntityComponentAdded(e,t),this.world.componentsManager.componentAddedToEntity(t),this.eventDispatcher.dispatchEvent(COMPONENT_ADDED,e,t)}}entityRemoveComponent(e,t,n){var o=e._ComponentTypes.indexOf(t);if(~o){if(this.eventDispatcher.dispatchEvent(COMPONENT_REMOVE,e,t),n)this._entityRemoveComponentSync(e,t,o);else{0===e._ComponentTypesToRemove.length&&this.entitiesWithComponentsToRemove.push(e),e._ComponentTypes.splice(o,1),e._ComponentTypesToRemove.push(t);var s=getName(t);e._componentsToRemove[s]=e._components[s],delete e._components[s]}this._queryManager.onEntityComponentRemoved(e,t),t.__proto__===SystemStateComponent&&(this.numStateComponents--,0!==this.numStateComponents||e.alive||e.remove())}}_entityRemoveComponentSync(e,t,n){e._ComponentTypes.splice(n,1);var o=componentPropertyName(t),s=getName(t),i=e._components[s];delete e._components[s],this.componentsManager._componentPool[o].release(i),this.world.componentsManager.componentRemovedFromEntity(t)}entityRemoveAllComponents(e,t){let n=e._ComponentTypes;for(let o=n.length-1;o>=0;o--)n[o].__proto__!==SystemStateComponent&&this.entityRemoveComponent(e,n[o],t)}removeEntity(e,t){var n=this._entities.indexOf(e);if(!~n)throw new Error("Tried to remove entity not in list");e.alive=!1,0===this.numStateComponents&&(this.eventDispatcher.dispatchEvent(ENTITY_REMOVED,e),this._queryManager.onEntityRemoved(e),!0===t?this._releaseEntity(e,n):this.entitiesToRemove.push(e)),this.entityRemoveAllComponents(e,t)}_releaseEntity(e,t){this._entities.splice(t,1),e._world=null,this._entityPool.release(e)}removeAllEntities(){for(var e=this._entities.length-1;e>=0;e--)this.removeEntity(this._entities[e])}processDeferredRemoval(){if(this.deferredRemovalEnabled){for(let e=0;e<this.entitiesToRemove.length;e++){let t=this.entitiesToRemove[e],n=this._entities.indexOf(t);this._releaseEntity(t,n)}this.entitiesToRemove.length=0;for(let o=0;o<this.entitiesWithComponentsToRemove.length;o++){let s=this.entitiesWithComponentsToRemove[o];for(;s._ComponentTypesToRemove.length>0;){let o=s._ComponentTypesToRemove.pop();var e=componentPropertyName(o),t=getName(o),n=s._componentsToRemove[t];delete s._componentsToRemove[t],this.componentsManager._componentPool[e].release(n),this.world.componentsManager.componentRemovedFromEntity(o)}}this.entitiesWithComponentsToRemove.length=0}}queryComponents(e){return this._queryManager.getQuery(e)}count(){return this._entities.length}stats(){var e={numEntities:this._entities.length,numQueries:Object.keys(this._queryManager._queries).length,queries:this._queryManager.stats(),numComponentPool:Object.keys(this.componentsManager._componentPool).length,componentPool:{},eventDispatcher:this.eventDispatcher.stats};for(var t in this.componentsManager._componentPool){var n=this.componentsManager._componentPool[t];e.componentPool[t]={used:n.totalUsed(),size:n.count}}return e}}const ENTITY_CREATED="EntityManager#ENTITY_CREATE",ENTITY_REMOVED="EntityManager#ENTITY_REMOVED",COMPONENT_ADDED="EntityManager#COMPONENT_ADDED",COMPONENT_REMOVE="EntityManager#COMPONENT_REMOVE";class DummyObjectPool{constructor(e){this.isDummyObjectPool=!0,this.count=0,this.used=0,this.T=e}aquire(){return this.used++,this.count++,new this.T}release(){this.used--}totalSize(){return this.count}totalFree(){return 1/0}totalUsed(){return this.used}}class ComponentManager{constructor(){this.Components={},this._componentPool={},this.numComponents={}}registerComponent(e){this.Components[e.name]?console.warn(`Component type: '${e.name}' already registered.`):(this.Components[e.name]=e,this.numComponents[e.name]=0)}componentAddedToEntity(e){this.Components[e.name]||this.registerComponent(e),this.numComponents[e.name]++}componentRemovedFromEntity(e){this.numComponents[e.name]--}getComponentsPool(e){var t=componentPropertyName(e);return this._componentPool[t]||(e.prototype.reset?this._componentPool[t]=new ObjectPool(e):(console.warn(`Component '${e.name}' won't benefit from pooling because 'reset' method was not implemented.`),this._componentPool[t]=new DummyObjectPool(e))),this._componentPool[t]}}var name="ecsy",version="0.2.2",description="Entity Component System in JS",main="build/ecsy.js",module="build/ecsy.module.js",types="src/index.d.ts",scripts={build:"rollup -c && npm run docs",docs:"rm docs/api/_sidebar.md; typedoc --readme none --mode file --excludeExternals --plugin typedoc-plugin-markdown  --theme docs/theme --hideSources --hideBreadcrumbs --out docs/api/ --includeDeclarations --includes 'src/**/*.d.ts' src; touch docs/api/_sidebar.md","dev:docs":"nodemon -e ts -x 'npm run docs' -w src",dev:"concurrently --names 'ROLLUP,DOCS,HTTP' -c 'bgBlue.bold,bgYellow.bold,bgGreen.bold' 'rollup -c -w -m inline' 'npm run dev:docs' 'npm run dev:server'","dev:server":"http-server -c-1 -p 8080 --cors",lint:"eslint src test examples",start:"npm run dev",test:"ava",travis:"npm run lint && npm run test && npm run build","watch:test":"ava --watch"},repository={type:"git",url:"git+https://github.com/fernandojsg/ecsy.git"},keywords=["ecs","entity component system"],author="Fernando Serrano <fernandojsg@gmail.com> (http://fernandojsg.com)",license="MIT",bugs={url:"https://github.com/fernandojsg/ecsy/issues"},ava={files:["test/**/*.test.js"],sources:["src/**/*.js"],require:["babel-register","esm"]},jspm={files:["package.json","LICENSE","README.md","build/ecsy.js","build/ecsy.min.js","build/ecsy.module.js"],directories:{}},homepage="https://github.com/fernandojsg/ecsy#readme",devDependencies={ava:"^1.4.1","babel-cli":"^6.26.0","babel-core":"^6.26.3","babel-eslint":"^10.0.3","babel-loader":"^8.0.6",concurrently:"^4.1.2","docsify-cli":"^4.4.0",eslint:"^5.16.0","eslint-config-prettier":"^4.3.0","eslint-plugin-prettier":"^3.1.2","http-server":"^0.11.1",nodemon:"^1.19.4",prettier:"^1.19.1",rollup:"^1.29.0","rollup-plugin-json":"^4.0.0","rollup-plugin-terser":"^5.2.0",typedoc:"^0.15.8","typedoc-plugin-markdown":"^2.2.16",typescript:"^3.7.5"},pjson={name:name,version:version,description:description,main:main,"jsnext:main":"build/ecsy.module.js",module:module,types:types,scripts:scripts,repository:repository,keywords:keywords,author:author,license:license,bugs:bugs,ava:ava,jspm:jspm,homepage:homepage,devDependencies:devDependencies};const Version=pjson.version;class World{constructor(){if(this.componentsManager=new ComponentManager(this),this.entityManager=new EntityManager(this),this.systemManager=new SystemManager(this),this.enabled=!0,this.eventQueues={},"undefined"!=typeof CustomEvent){var e=new CustomEvent("ecsy-world-created",{detail:{world:this,version:Version}});window.dispatchEvent(e)}this.lastTime=performance.now()}registerComponent(e){return this.componentsManager.registerComponent(e),this}registerSystem(e,t){return this.systemManager.registerSystem(e,t),this}getSystem(e){return this.systemManager.getSystem(e)}getSystems(){return this.systemManager.getSystems()}execute(e,t){if(!e){let t=performance.now();e=t-this.lastTime,this.lastTime=t}this.enabled&&(this.systemManager.execute(e,t),this.entityManager.processDeferredRemoval())}stop(){this.enabled=!1}play(){this.enabled=!0}createEntity(e){return this.entityManager.createEntity(e)}stats(){var e={entities:this.entityManager.stats(),system:this.systemManager.stats()};console.log(JSON.stringify(e,null,2))}}class System{canExecute(){if(0===this._mandatoryQueries.length)return!0;for(let e=0;e<this._mandatoryQueries.length;e++){if(0===this._mandatoryQueries[e].entities.length)return!1}return!0}constructor(e,t){if(this.world=e,this.enabled=!0,this._queries={},this.queries={},this.priority=0,this.executeTime=0,t&&t.priority&&(this.priority=t.priority),this._mandatoryQueries=[],this.initialized=!0,this.constructor.queries)for(var n in this.constructor.queries){var o=this.constructor.queries[n],s=o.components;if(!s||0===s.length)throw new Error("'components' attribute can't be empty in a query");var i=this.world.entityManager.queryComponents(s);this._queries[n]=i,!0===o.mandatory&&this._mandatoryQueries.push(i),this.queries[n]={results:i.entities};const e={added:Query.prototype.ENTITY_ADDED,removed:Query.prototype.ENTITY_REMOVED,changed:Query.prototype.COMPONENT_CHANGED};o.listen&&["added","removed","changed"].forEach(t=>{if(o.listen[t]){let s=o.listen[t];if("changed"===t){if(i.reactive=!0,!0===s){let e=this.queries[n][t]=[];i.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,t=>{-1===e.indexOf(t)&&e.push(t)})}else if(Array.isArray(s)){let e=this.queries[n][t]=[];i.eventDispatcher.addEventListener(Query.prototype.COMPONENT_CHANGED,(t,n)=>{-1!==s.indexOf(n.constructor)&&-1===e.indexOf(t)&&e.push(t)})}}else{let o=this.queries[n][t]=[];i.eventDispatcher.addEventListener(e[t],e=>{-1===o.indexOf(e)&&o.push(e)})}}})}}stop(){this.executeTime=0,this.enabled=!1}play(){this.enabled=!0}clearEvents(){for(let t in this.queries){var e=this.queries[t];if(e.added&&(e.added.length=0),e.removed&&(e.removed.length=0),e.changed)if(Array.isArray(e.changed))e.changed.length=0;else for(let t in e.changed)e.changed[t].length=0}}toJSON(){var e={name:this.constructor.name,enabled:this.enabled,executeTime:this.executeTime,priority:this.priority,queries:{}};if(this.constructor.queries){var t=this.constructor.queries;for(let n in t){let o=this.queries[n],s=t[n],i=e.queries[n]={key:this._queries[n].key};if(i.mandatory=!0===s.mandatory,i.reactive=s.listen&&(!0===s.listen.added||!0===s.listen.removed||!0===s.listen.changed||Array.isArray(s.listen.changed)),i.reactive){i.listen={},["added","removed","changed"].forEach(e=>{o[e]&&(i.listen[e]={entities:o[e].length})})}}}return e}}function Not(e){return{operator:"not",Component:e}}class Component{}Component.isComponent=!0;class TagComponent{reset(){}}function createType(e){var t=["create","reset","clear"].filter(t=>!e[t]);if(t.length>0)throw new Error(`createType expect type definition to implements the following functions: ${t.join(", ")}`);return e.isType=!0,e}TagComponent.isTagComponent=!0;var Types={};Types.Number=createType({baseType:Number,isSimpleType:!0,create:e=>void 0!==e?e:0,reset:(e,t,n)=>{e[t]=void 0!==n?n:0},clear:(e,t)=>{e[t]=0}}),Types.Boolean=createType({baseType:Boolean,isSimpleType:!0,create:e=>void 0!==e&&e,reset:(e,t,n)=>{e[t]=void 0!==n&&n},clear:(e,t)=>{e[t]=!1}}),Types.String=createType({baseType:String,isSimpleType:!0,create:e=>void 0!==e?e:"",reset:(e,t,n)=>{e[t]=void 0!==n?n:""},clear:(e,t)=>{e[t]=""}}),Types.Array=createType({baseType:Array,create:e=>void 0!==e?e.slice():[],reset:(e,t,n)=>{void 0!==n?e[t]=n.slice():e[t].length=0},clear:(e,t)=>{e[t].length=0},copy:(e,t,n)=>{e[n]=t[n].slice()}});var standardTypes={number:Types.Number,boolean:Types.Boolean,string:Types.String};function inferType(e){return Array.isArray(e)?Types.Array:standardTypes[typeof e]?standardTypes[typeof e]:null}function createComponentClass(e,t){for(let t in e){e[t].type||(e[t].type=inferType(e[t].default))}var n=function(){for(let n in e){var t=e[n];let o=t.type;o&&o.isType?this[n]=o.create(t.default):this[n]=t.default}};void 0!==t&&Object.defineProperty(n,"name",{value:t}),n.prototype.schema=e;var o=!0;for(let t in e){var s=e[t];s.type||(s.type=inferType(s.default)),s.type||(console.warn(`Unknown type definition for attribute '${t}'`),o=!1)}if(o){n.prototype.copy=function(t){for(let n in e)if(t[n]){let o=e[n].type;o.isSimpleType?this[n]=t[n]:o.copy?o.copy(this,t,n):console.warn(`Unknown copy function for attribute '${n}' data type`)}},n.prototype.reset=function(){for(let t in e){let n=e[t],o=n.type;o.reset&&o.reset(this,t,n.default)}},n.prototype.clear=function(){for(let t in e){let n=e[t].type;n.clear&&n.clear(this,t)}};for(let t in e){let o=e[t],s=o.type;n.prototype[t]=o.default,s.reset&&s.reset(n.prototype,t,o.default)}}else for(var i in console.warn("This component can't use pooling because some data types are not registered. Please provide a type created with 'createType'"),e){let t=e[i];n.prototype[i]=t.default}return n}function generateId(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",o=n.length,s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*o));return t}function injectScript(e,t){var n=document.createElement("script");n.src=e,n.onload=t,(document.head||document.documentElement).appendChild(n)}function hookConsoleAndErrors(e){["error","warning","log"].forEach(t=>{if("function"==typeof console[t]){var n=console[t].bind(console);console[t]=(...o)=>(e.send({method:"console",type:t,args:JSON.stringify(o)}),n.apply(null,o))}}),window.addEventListener("error",t=>{e.send({method:"error",error:JSON.stringify({message:t.error.message,stack:t.error.stack})})})}function includeRemoteIdHTML(e){let t=document.createElement("div");return t.style.cssText="\n    align-items: center;\n    background-color: #333;\n    color: #aaa;\n    display:flex;\n    font-family: Arial;\n    font-size: 1.1em;\n    height: 40px;\n    justify-content: center;\n    left: 0;\n    opacity: 0.9;\n    position: absolute;\n    right: 0;\n    text-align: center;\n    top: 0;\n  ",t.innerHTML=`Open ECSY devtools to connect to this page using the code:&nbsp;<b style="color: #fff">${e}</b>&nbsp;<button onClick="generateNewCode()">Generate new code</button>`,document.body.appendChild(t),t}function enableRemoteDevtools(remoteId){window.generateNewCode=()=>{window.localStorage.clear(),remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId),window.location.reload(!1)},remoteId=remoteId||window.localStorage.getItem("ecsyRemoteId"),remoteId||(remoteId=generateId(6),window.localStorage.setItem("ecsyRemoteId",remoteId));let infoDiv=includeRemoteIdHTML(remoteId);window.__ECSY_REMOTE_DEVTOOLS_INJECTED=!0,window.__ECSY_REMOTE_DEVTOOLS={};let Version="",worldsBeforeLoading=[],onWorldCreated=e=>{var t=e.detail.world;Version=e.detail.version,worldsBeforeLoading.push(t)};window.addEventListener("ecsy-world-created",onWorldCreated);let onLoaded=()=>{var peer=new Peer(remoteId);peer.on("open",()=>{peer.on("connection",connection=>{window.__ECSY_REMOTE_DEVTOOLS.connection=connection,connection.on("open",(function(){infoDiv.innerHTML="Connected",connection.on("data",(function(data){if("init"===data.type){var script=document.createElement("script");script.setAttribute("type","text/javascript"),script.onload=()=>{script.parentNode.removeChild(script),window.removeEventListener("ecsy-world-created",onWorldCreated),worldsBeforeLoading.forEach(e=>{var t=new CustomEvent("ecsy-world-created",{detail:{world:e,version:Version}});window.dispatchEvent(t)})},script.innerHTML=data.script,(document.head||document.documentElement).appendChild(script),script.onload(),hookConsoleAndErrors(connection)}else if("executeScript"===data.type){let value=eval(data.script);data.returnEval&&connection.send({method:"evalReturn",value:value})}}))}))})})};injectScript("https://cdn.jsdelivr.net/npm/peerjs@0.3.20/dist/peer.min.js",onLoaded)}const urlParams=new URLSearchParams(window.location.search);urlParams.has("enable-remote-devtools")&&enableRemoteDevtools(),exports.Component=Component,exports.Not=Not,exports.System=System,exports.SystemStateComponent=SystemStateComponent,exports.TagComponent=TagComponent,exports.Types=Types,exports.Version=Version,exports.World=World,exports.createComponentClass=createComponentClass,exports.createType=createType,exports.enableRemoteDevtools=enableRemoteDevtools,Object.defineProperty(exports,"__esModule",{value:!0})}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWNzeS5taW4uanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9TeXN0ZW1NYW5hZ2VyLmpzIiwiLi4vc3JjL0V2ZW50RGlzcGF0Y2hlci5qcyIsIi4uL3NyYy9VdGlscy5qcyIsIi4uL3NyYy9RdWVyeS5qcyIsIi4uL3NyYy9FbnRpdHkuanMiLCIuLi9zcmMvT2JqZWN0UG9vbC5qcyIsIi4uL3NyYy9RdWVyeU1hbmFnZXIuanMiLCIuLi9zcmMvU3lzdGVtU3RhdGVDb21wb25lbnQuanMiLCIuLi9zcmMvRW50aXR5TWFuYWdlci5qcyIsIi4uL3NyYy9EdW1teU9iamVjdFBvb2wuanMiLCIuLi9zcmMvQ29tcG9uZW50TWFuYWdlci5qcyIsIi4uL3NyYy9WZXJzaW9uLmpzIiwiLi4vc3JjL1dvcmxkLmpzIiwiLi4vc3JjL1N5c3RlbS5qcyIsIi4uL3NyYy9Db21wb25lbnQuanMiLCIuLi9zcmMvVGFnQ29tcG9uZW50LmpzIiwiLi4vc3JjL0NyZWF0ZVR5cGUuanMiLCIuLi9zcmMvU3RhbmRhcmRUeXBlcy5qcyIsIi4uL3NyYy9JbmZlclR5cGUuanMiLCIuLi9zcmMvQ3JlYXRlQ29tcG9uZW50Q2xhc3MuanMiLCIuLi9zcmMvUmVtb3RlRGV2VG9vbHMvdXRpbHMuanMiLCIuLi9zcmMvUmVtb3RlRGV2VG9vbHMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFN5c3RlbU1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcih3b3JsZCkge1xuICAgIHRoaXMuX3N5c3RlbXMgPSBbXTtcbiAgICB0aGlzLl9leGVjdXRlU3lzdGVtcyA9IFtdOyAvLyBTeXN0ZW1zIHRoYXQgaGF2ZSBgZXhlY3V0ZWAgbWV0aG9kXG4gICAgdGhpcy53b3JsZCA9IHdvcmxkO1xuICAgIHRoaXMubGFzdEV4ZWN1dGVkU3lzdGVtID0gbnVsbDtcbiAgfVxuXG4gIHJlZ2lzdGVyU3lzdGVtKFN5c3RlbSwgYXR0cmlidXRlcykge1xuICAgIGlmIChcbiAgICAgIHRoaXMuX3N5c3RlbXMuZmluZChzID0+IHMuY29uc3RydWN0b3IubmFtZSA9PT0gU3lzdGVtLm5hbWUpICE9PSB1bmRlZmluZWRcbiAgICApIHtcbiAgICAgIGNvbnNvbGUud2FybihgU3lzdGVtICcke1N5c3RlbS5uYW1lfScgYWxyZWFkeSByZWdpc3RlcmVkLmApO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIHN5c3RlbSA9IG5ldyBTeXN0ZW0odGhpcy53b3JsZCwgYXR0cmlidXRlcyk7XG4gICAgaWYgKHN5c3RlbS5pbml0KSBzeXN0ZW0uaW5pdCgpO1xuICAgIHN5c3RlbS5vcmRlciA9IHRoaXMuX3N5c3RlbXMubGVuZ3RoO1xuICAgIHRoaXMuX3N5c3RlbXMucHVzaChzeXN0ZW0pO1xuICAgIGlmIChzeXN0ZW0uZXhlY3V0ZSkge1xuICAgICAgdGhpcy5fZXhlY3V0ZVN5c3RlbXMucHVzaChzeXN0ZW0pO1xuICAgICAgdGhpcy5zb3J0U3lzdGVtcygpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNvcnRTeXN0ZW1zKCkge1xuICAgIHRoaXMuX2V4ZWN1dGVTeXN0ZW1zLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLnByaW9yaXR5IC0gYi5wcmlvcml0eSB8fCBhLm9yZGVyIC0gYi5vcmRlcjtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFN5c3RlbShTeXN0ZW0pIHtcbiAgICByZXR1cm4gdGhpcy5fc3lzdGVtcy5maW5kKHMgPT4gcyBpbnN0YW5jZW9mIFN5c3RlbSk7XG4gIH1cblxuICBnZXRTeXN0ZW1zKCkge1xuICAgIHJldHVybiB0aGlzLl9zeXN0ZW1zO1xuICB9XG5cbiAgcmVtb3ZlU3lzdGVtKFN5c3RlbSkge1xuICAgIHZhciBpbmRleCA9IHRoaXMuX3N5c3RlbXMuaW5kZXhPZihTeXN0ZW0pO1xuICAgIGlmICghfmluZGV4KSByZXR1cm47XG5cbiAgICB0aGlzLl9zeXN0ZW1zLnNwbGljZShpbmRleCwgMSk7XG4gIH1cblxuICBleGVjdXRlU3lzdGVtKHN5c3RlbSwgZGVsdGEsIHRpbWUpIHtcbiAgICBpZiAoc3lzdGVtLmluaXRpYWxpemVkKSB7XG4gICAgICBpZiAoc3lzdGVtLmNhbkV4ZWN1dGUoKSkge1xuICAgICAgICBsZXQgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIHN5c3RlbS5leGVjdXRlKGRlbHRhLCB0aW1lKTtcbiAgICAgICAgc3lzdGVtLmV4ZWN1dGVUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICAgIHRoaXMubGFzdEV4ZWN1dGVkU3lzdGVtID0gc3lzdGVtO1xuICAgICAgICBzeXN0ZW0uY2xlYXJFdmVudHMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdG9wKCkge1xuICAgIHRoaXMuX2V4ZWN1dGVTeXN0ZW1zLmZvckVhY2goc3lzdGVtID0+IHN5c3RlbS5zdG9wKCkpO1xuICB9XG5cbiAgZXhlY3V0ZShkZWx0YSwgdGltZSwgZm9yY2VQbGF5KSB7XG4gICAgdGhpcy5fZXhlY3V0ZVN5c3RlbXMuZm9yRWFjaChcbiAgICAgIHN5c3RlbSA9PlxuICAgICAgICAoZm9yY2VQbGF5IHx8IHN5c3RlbS5lbmFibGVkKSAmJiB0aGlzLmV4ZWN1dGVTeXN0ZW0oc3lzdGVtLCBkZWx0YSwgdGltZSlcbiAgICApO1xuICB9XG5cbiAgc3RhdHMoKSB7XG4gICAgdmFyIHN0YXRzID0ge1xuICAgICAgbnVtU3lzdGVtczogdGhpcy5fc3lzdGVtcy5sZW5ndGgsXG4gICAgICBzeXN0ZW1zOiB7fVxuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3N5c3RlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzeXN0ZW0gPSB0aGlzLl9zeXN0ZW1zW2ldO1xuICAgICAgdmFyIHN5c3RlbVN0YXRzID0gKHN0YXRzLnN5c3RlbXNbc3lzdGVtLmNvbnN0cnVjdG9yLm5hbWVdID0ge1xuICAgICAgICBxdWVyaWVzOiB7fVxuICAgICAgfSk7XG4gICAgICBmb3IgKHZhciBuYW1lIGluIHN5c3RlbS5jdHgpIHtcbiAgICAgICAgc3lzdGVtU3RhdHMucXVlcmllc1tuYW1lXSA9IHN5c3RlbS5jdHhbbmFtZV0uc3RhdHMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdHM7XG4gIH1cbn1cbiIsIi8qKlxuICogQHByaXZhdGVcbiAqIEBjbGFzcyBFdmVudERpc3BhdGNoZXJcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXZlbnREaXNwYXRjaGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzID0ge307XG4gICAgdGhpcy5zdGF0cyA9IHtcbiAgICAgIGZpcmVkOiAwLFxuICAgICAgaGFuZGxlZDogMFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgTmFtZSBvZiB0aGUgZXZlbnQgdG8gbGlzdGVuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIENhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiB0aGUgZXZlbnQgaXMgZmlyZWRcbiAgICovXG4gIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lcikge1xuICAgIGxldCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgaWYgKGxpc3RlbmVyc1tldmVudE5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxpc3RlbmVyc1tldmVudE5hbWVdID0gW107XG4gICAgfVxuXG4gICAgaWYgKGxpc3RlbmVyc1tldmVudE5hbWVdLmluZGV4T2YobGlzdGVuZXIpID09PSAtMSkge1xuICAgICAgbGlzdGVuZXJzW2V2ZW50TmFtZV0ucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGV2ZW50IGxpc3RlbmVyIGlzIGFscmVhZHkgYWRkZWQgdG8gdGhlIGxpc3Qgb2YgbGlzdGVuZXJzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgTmFtZSBvZiB0aGUgZXZlbnQgdG8gY2hlY2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgQ2FsbGJhY2sgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnRcbiAgICovXG4gIGhhc0V2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lcikge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLl9saXN0ZW5lcnNbZXZlbnROYW1lXSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICB0aGlzLl9saXN0ZW5lcnNbZXZlbnROYW1lXS5pbmRleE9mKGxpc3RlbmVyKSAhPT0gLTFcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIE5hbWUgb2YgdGhlIGV2ZW50IHRvIHJlbW92ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBDYWxsYmFjayBmb3IgdGhlIHNwZWNpZmllZCBldmVudFxuICAgKi9cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgdmFyIGxpc3RlbmVyQXJyYXkgPSB0aGlzLl9saXN0ZW5lcnNbZXZlbnROYW1lXTtcbiAgICBpZiAobGlzdGVuZXJBcnJheSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YXIgaW5kZXggPSBsaXN0ZW5lckFycmF5LmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICBsaXN0ZW5lckFycmF5LnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoIGFuIGV2ZW50XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgTmFtZSBvZiB0aGUgZXZlbnQgdG8gZGlzcGF0Y2hcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSAoT3B0aW9uYWwpIEVudGl0eSB0byBlbWl0XG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBjb21wb25lbnRcbiAgICovXG4gIGRpc3BhdGNoRXZlbnQoZXZlbnROYW1lLCBlbnRpdHksIGNvbXBvbmVudCkge1xuICAgIHRoaXMuc3RhdHMuZmlyZWQrKztcblxuICAgIHZhciBsaXN0ZW5lckFycmF5ID0gdGhpcy5fbGlzdGVuZXJzW2V2ZW50TmFtZV07XG4gICAgaWYgKGxpc3RlbmVyQXJyYXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIGFycmF5ID0gbGlzdGVuZXJBcnJheS5zbGljZSgwKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBhcnJheVtpXS5jYWxsKHRoaXMsIGVudGl0eSwgY29tcG9uZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgc3RhdHMgY291bnRlcnNcbiAgICovXG4gIHJlc2V0Q291bnRlcnMoKSB7XG4gICAgdGhpcy5zdGF0cy5maXJlZCA9IHRoaXMuc3RhdHMuaGFuZGxlZCA9IDA7XG4gIH1cbn1cbiIsIi8qKlxuICogUmV0dXJuIHRoZSBuYW1lIG9mIGEgY29tcG9uZW50XG4gKiBAcGFyYW0ge0NvbXBvbmVudH0gQ29tcG9uZW50XG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmFtZShDb21wb25lbnQpIHtcbiAgcmV0dXJuIENvbXBvbmVudC5uYW1lO1xufVxuXG4vKipcbiAqIFJldHVybiBhIHZhbGlkIHByb3BlcnR5IG5hbWUgZm9yIHRoZSBDb21wb25lbnRcbiAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnRcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wb25lbnRQcm9wZXJ0eU5hbWUoQ29tcG9uZW50KSB7XG4gIHJldHVybiBnZXROYW1lKENvbXBvbmVudCk7XG59XG5cbi8qKlxuICogR2V0IGEga2V5IGZyb20gYSBsaXN0IG9mIGNvbXBvbmVudHNcbiAqIEBwYXJhbSB7QXJyYXkoQ29tcG9uZW50KX0gQ29tcG9uZW50cyBBcnJheSBvZiBjb21wb25lbnRzIHRvIGdlbmVyYXRlIHRoZSBrZXlcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWVyeUtleShDb21wb25lbnRzKSB7XG4gIHZhciBuYW1lcyA9IFtdO1xuICBmb3IgKHZhciBuID0gMDsgbiA8IENvbXBvbmVudHMubGVuZ3RoOyBuKyspIHtcbiAgICB2YXIgVCA9IENvbXBvbmVudHNbbl07XG4gICAgaWYgKHR5cGVvZiBUID09PSBcIm9iamVjdFwiKSB7XG4gICAgICB2YXIgb3BlcmF0b3IgPSBULm9wZXJhdG9yID09PSBcIm5vdFwiID8gXCIhXCIgOiBULm9wZXJhdG9yO1xuICAgICAgbmFtZXMucHVzaChvcGVyYXRvciArIGdldE5hbWUoVC5Db21wb25lbnQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmFtZXMucHVzaChnZXROYW1lKFQpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmFtZXMuc29ydCgpLmpvaW4oXCItXCIpO1xufVxuIiwiaW1wb3J0IEV2ZW50RGlzcGF0Y2hlciBmcm9tIFwiLi9FdmVudERpc3BhdGNoZXIuanNcIjtcbmltcG9ydCB7IHF1ZXJ5S2V5IH0gZnJvbSBcIi4vVXRpbHMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUXVlcnkge1xuICAvKipcbiAgICogQHBhcmFtIHtBcnJheShDb21wb25lbnQpfSBDb21wb25lbnRzIExpc3Qgb2YgdHlwZXMgb2YgY29tcG9uZW50cyB0byBxdWVyeVxuICAgKi9cbiAgY29uc3RydWN0b3IoQ29tcG9uZW50cywgbWFuYWdlcikge1xuICAgIHRoaXMuQ29tcG9uZW50cyA9IFtdO1xuICAgIHRoaXMuTm90Q29tcG9uZW50cyA9IFtdO1xuXG4gICAgQ29tcG9uZW50cy5mb3JFYWNoKGNvbXBvbmVudCA9PiB7XG4gICAgICBpZiAodHlwZW9mIGNvbXBvbmVudCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICB0aGlzLk5vdENvbXBvbmVudHMucHVzaChjb21wb25lbnQuQ29tcG9uZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuQ29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5Db21wb25lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIGEgcXVlcnkgd2l0aG91dCBjb21wb25lbnRzXCIpO1xuICAgIH1cblxuICAgIHRoaXMuZW50aXRpZXMgPSBbXTtcblxuICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyID0gbmV3IEV2ZW50RGlzcGF0Y2hlcigpO1xuXG4gICAgLy8gVGhpcyBxdWVyeSBpcyBiZWluZyB1c2VkIGJ5IGEgcmVhY3RpdmUgc3lzdGVtXG4gICAgdGhpcy5yZWFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgdGhpcy5rZXkgPSBxdWVyeUtleShDb21wb25lbnRzKTtcblxuICAgIC8vIEZpbGwgdGhlIHF1ZXJ5IHdpdGggdGhlIGV4aXN0aW5nIGVudGl0aWVzXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYW5hZ2VyLl9lbnRpdGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGVudGl0eSA9IG1hbmFnZXIuX2VudGl0aWVzW2ldO1xuICAgICAgaWYgKHRoaXMubWF0Y2goZW50aXR5KSkge1xuICAgICAgICAvLyBAdG9kbyA/Pz8gdGhpcy5hZGRFbnRpdHkoZW50aXR5KTsgPT4gcHJldmVudGluZyB0aGUgZXZlbnQgdG8gYmUgZ2VuZXJhdGVkXG4gICAgICAgIGVudGl0eS5xdWVyaWVzLnB1c2godGhpcyk7XG4gICAgICAgIHRoaXMuZW50aXRpZXMucHVzaChlbnRpdHkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgZW50aXR5IHRvIHRoaXMgcXVlcnlcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eVxuICAgKi9cbiAgYWRkRW50aXR5KGVudGl0eSkge1xuICAgIGVudGl0eS5xdWVyaWVzLnB1c2godGhpcyk7XG4gICAgdGhpcy5lbnRpdGllcy5wdXNoKGVudGl0eSk7XG5cbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KFF1ZXJ5LnByb3RvdHlwZS5FTlRJVFlfQURERUQsIGVudGl0eSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGVudGl0eSBmcm9tIHRoaXMgcXVlcnlcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eVxuICAgKi9cbiAgcmVtb3ZlRW50aXR5KGVudGl0eSkge1xuICAgIGxldCBpbmRleCA9IHRoaXMuZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpO1xuICAgIGlmICh+aW5kZXgpIHtcbiAgICAgIHRoaXMuZW50aXRpZXMuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgICAgaW5kZXggPSBlbnRpdHkucXVlcmllcy5pbmRleE9mKHRoaXMpO1xuICAgICAgZW50aXR5LnF1ZXJpZXMuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgICAgdGhpcy5ldmVudERpc3BhdGNoZXIuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgUXVlcnkucHJvdG90eXBlLkVOVElUWV9SRU1PVkVELFxuICAgICAgICBlbnRpdHlcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgbWF0Y2goZW50aXR5KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGVudGl0eS5oYXNBbGxDb21wb25lbnRzKHRoaXMuQ29tcG9uZW50cykgJiZcbiAgICAgICFlbnRpdHkuaGFzQW55Q29tcG9uZW50cyh0aGlzLk5vdENvbXBvbmVudHMpXG4gICAgKTtcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4ge1xuICAgICAga2V5OiB0aGlzLmtleSxcbiAgICAgIHJlYWN0aXZlOiB0aGlzLnJlYWN0aXZlLFxuICAgICAgY29tcG9uZW50czoge1xuICAgICAgICBpbmNsdWRlZDogdGhpcy5Db21wb25lbnRzLm1hcChDID0+IEMubmFtZSksXG4gICAgICAgIG5vdDogdGhpcy5Ob3RDb21wb25lbnRzLm1hcChDID0+IEMubmFtZSlcbiAgICAgIH0sXG4gICAgICBudW1FbnRpdGllczogdGhpcy5lbnRpdGllcy5sZW5ndGhcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBzdGF0cyBmb3IgdGhpcyBxdWVyeVxuICAgKi9cbiAgc3RhdHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG51bUNvbXBvbmVudHM6IHRoaXMuQ29tcG9uZW50cy5sZW5ndGgsXG4gICAgICBudW1FbnRpdGllczogdGhpcy5lbnRpdGllcy5sZW5ndGhcbiAgICB9O1xuICB9XG59XG5cblF1ZXJ5LnByb3RvdHlwZS5FTlRJVFlfQURERUQgPSBcIlF1ZXJ5I0VOVElUWV9BRERFRFwiO1xuUXVlcnkucHJvdG90eXBlLkVOVElUWV9SRU1PVkVEID0gXCJRdWVyeSNFTlRJVFlfUkVNT1ZFRFwiO1xuUXVlcnkucHJvdG90eXBlLkNPTVBPTkVOVF9DSEFOR0VEID0gXCJRdWVyeSNDT01QT05FTlRfQ0hBTkdFRFwiO1xuIiwiaW1wb3J0IFF1ZXJ5IGZyb20gXCIuL1F1ZXJ5LmpzXCI7XG5pbXBvcnQgd3JhcEltbXV0YWJsZUNvbXBvbmVudCBmcm9tIFwiLi9XcmFwSW1tdXRhYmxlQ29tcG9uZW50LmpzXCI7XG5cbi8vIEB0b2RvIFRha2UgdGhpcyBvdXQgZnJvbSB0aGVyZSBvciB1c2UgRU5WXG5jb25zdCBERUJVRyA9IGZhbHNlO1xuXG52YXIgbmV4dElkID0gMDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW50aXR5IHtcbiAgY29uc3RydWN0b3Iod29ybGQpIHtcbiAgICB0aGlzLl93b3JsZCA9IHdvcmxkIHx8IG51bGw7XG5cbiAgICAvLyBVbmlxdWUgSUQgZm9yIHRoaXMgZW50aXR5XG4gICAgdGhpcy5pZCA9IG5leHRJZCsrO1xuXG4gICAgLy8gTGlzdCBvZiBjb21wb25lbnRzIHR5cGVzIHRoZSBlbnRpdHkgaGFzXG4gICAgdGhpcy5fQ29tcG9uZW50VHlwZXMgPSBbXTtcblxuICAgIC8vIEluc3RhbmNlIG9mIHRoZSBjb21wb25lbnRzXG4gICAgdGhpcy5fY29tcG9uZW50cyA9IHt9O1xuXG4gICAgdGhpcy5fY29tcG9uZW50c1RvUmVtb3ZlID0ge307XG5cbiAgICAvLyBRdWVyaWVzIHdoZXJlIHRoZSBlbnRpdHkgaXMgYWRkZWRcbiAgICB0aGlzLnF1ZXJpZXMgPSBbXTtcblxuICAgIC8vIFVzZWQgZm9yIGRlZmVycmVkIHJlbW92YWxcbiAgICB0aGlzLl9Db21wb25lbnRUeXBlc1RvUmVtb3ZlID0gW107XG5cbiAgICB0aGlzLmFsaXZlID0gZmFsc2U7XG4gIH1cblxuICAvLyBDT01QT05FTlRTXG5cbiAgZ2V0Q29tcG9uZW50KENvbXBvbmVudCwgaW5jbHVkZVJlbW92ZWQpIHtcbiAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fY29tcG9uZW50c1tDb21wb25lbnQubmFtZV07XG5cbiAgICBpZiAoIWNvbXBvbmVudCAmJiBpbmNsdWRlUmVtb3ZlZCA9PT0gdHJ1ZSkge1xuICAgICAgY29tcG9uZW50ID0gdGhpcy5fY29tcG9uZW50c1RvUmVtb3ZlW0NvbXBvbmVudC5uYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gREVCVUcgPyB3cmFwSW1tdXRhYmxlQ29tcG9uZW50KENvbXBvbmVudCwgY29tcG9uZW50KSA6IGNvbXBvbmVudDtcbiAgfVxuXG4gIGdldFJlbW92ZWRDb21wb25lbnQoQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHNUb1JlbW92ZVtDb21wb25lbnQubmFtZV07XG4gIH1cblxuICBnZXRDb21wb25lbnRzKCkge1xuICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzO1xuICB9XG5cbiAgZ2V0Q29tcG9uZW50c1RvUmVtb3ZlKCkge1xuICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzVG9SZW1vdmU7XG4gIH1cblxuICBnZXRDb21wb25lbnRUeXBlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fQ29tcG9uZW50VHlwZXM7XG4gIH1cblxuICBnZXRNdXRhYmxlQ29tcG9uZW50KENvbXBvbmVudCkge1xuICAgIHZhciBjb21wb25lbnQgPSB0aGlzLl9jb21wb25lbnRzW0NvbXBvbmVudC5uYW1lXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucXVlcmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5xdWVyaWVzW2ldO1xuICAgICAgLy8gQHRvZG8gYWNjZWxlcmF0ZSB0aGlzIGNoZWNrLiBNYXliZSBoYXZpbmcgcXVlcnkuX0NvbXBvbmVudHMgYXMgYW4gb2JqZWN0XG4gICAgICBpZiAocXVlcnkucmVhY3RpdmUgJiYgcXVlcnkuQ29tcG9uZW50cy5pbmRleE9mKENvbXBvbmVudCkgIT09IC0xKSB7XG4gICAgICAgIHF1ZXJ5LmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgIFF1ZXJ5LnByb3RvdHlwZS5DT01QT05FTlRfQ0hBTkdFRCxcbiAgICAgICAgICB0aGlzLFxuICAgICAgICAgIGNvbXBvbmVudFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29tcG9uZW50O1xuICB9XG5cbiAgYWRkQ29tcG9uZW50KENvbXBvbmVudCwgdmFsdWVzKSB7XG4gICAgdGhpcy5fd29ybGQuZW50aXR5QWRkQ29tcG9uZW50KHRoaXMsIENvbXBvbmVudCwgdmFsdWVzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJlbW92ZUNvbXBvbmVudChDb21wb25lbnQsIGZvcmNlUmVtb3ZlKSB7XG4gICAgdGhpcy5fd29ybGQuZW50aXR5UmVtb3ZlQ29tcG9uZW50KHRoaXMsIENvbXBvbmVudCwgZm9yY2VSZW1vdmUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgaGFzQ29tcG9uZW50KENvbXBvbmVudCwgaW5jbHVkZVJlbW92ZWQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgISF+dGhpcy5fQ29tcG9uZW50VHlwZXMuaW5kZXhPZihDb21wb25lbnQpIHx8XG4gICAgICAoaW5jbHVkZVJlbW92ZWQgPT09IHRydWUgJiYgdGhpcy5oYXNSZW1vdmVkQ29tcG9uZW50KENvbXBvbmVudCkpXG4gICAgKTtcbiAgfVxuXG4gIGhhc1JlbW92ZWRDb21wb25lbnQoQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuICEhfnRoaXMuX0NvbXBvbmVudFR5cGVzVG9SZW1vdmUuaW5kZXhPZihDb21wb25lbnQpO1xuICB9XG5cbiAgaGFzQWxsQ29tcG9uZW50cyhDb21wb25lbnRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDb21wb25lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIXRoaXMuaGFzQ29tcG9uZW50KENvbXBvbmVudHNbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaGFzQW55Q29tcG9uZW50cyhDb21wb25lbnRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBDb21wb25lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5oYXNDb21wb25lbnQoQ29tcG9uZW50c1tpXSkpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZW1vdmVBbGxDb21wb25lbnRzKGZvcmNlUmVtb3ZlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dvcmxkLmVudGl0eVJlbW92ZUFsbENvbXBvbmVudHModGhpcywgZm9yY2VSZW1vdmUpO1xuICB9XG5cbiAgLy8gRVhUUkFTXG5cbiAgLy8gSW5pdGlhbGl6ZSB0aGUgZW50aXR5LiBUbyBiZSB1c2VkIHdoZW4gcmV0dXJuaW5nIGFuIGVudGl0eSB0byB0aGUgcG9vbFxuICByZXNldCgpIHtcbiAgICB0aGlzLmlkID0gbmV4dElkKys7XG4gICAgdGhpcy5fd29ybGQgPSBudWxsO1xuICAgIHRoaXMuX0NvbXBvbmVudFR5cGVzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5xdWVyaWVzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fY29tcG9uZW50cyA9IHt9O1xuICB9XG5cbiAgcmVtb3ZlKGZvcmNlUmVtb3ZlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dvcmxkLnJlbW92ZUVudGl0eSh0aGlzLCBmb3JjZVJlbW92ZSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE9iamVjdFBvb2wge1xuICAvLyBAdG9kbyBBZGQgaW5pdGlhbCBzaXplXG4gIGNvbnN0cnVjdG9yKFQsIGluaXRpYWxTaXplKSB7XG4gICAgdGhpcy5mcmVlTGlzdCA9IFtdO1xuICAgIHRoaXMuY291bnQgPSAwO1xuICAgIHRoaXMuVCA9IFQ7XG4gICAgdGhpcy5pc09iamVjdFBvb2wgPSB0cnVlO1xuXG4gICAgdmFyIGV4dHJhQXJncyA9IG51bGw7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICBleHRyYUFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgZXh0cmFBcmdzLnNoaWZ0KCk7XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVFbGVtZW50ID0gZXh0cmFBcmdzXG4gICAgICA/ICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gbmV3IFQoLi4uZXh0cmFBcmdzKTtcbiAgICAgICAgfVxuICAgICAgOiAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBUKCk7XG4gICAgICAgIH07XG5cbiAgICBpZiAodHlwZW9mIGluaXRpYWxTaXplICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aGlzLmV4cGFuZChpbml0aWFsU2l6ZSk7XG4gICAgfVxuICB9XG5cbiAgYXF1aXJlKCkge1xuICAgIC8vIEdyb3cgdGhlIGxpc3QgYnkgMjAlaXNoIGlmIHdlJ3JlIG91dFxuICAgIGlmICh0aGlzLmZyZWVMaXN0Lmxlbmd0aCA8PSAwKSB7XG4gICAgICB0aGlzLmV4cGFuZChNYXRoLnJvdW5kKHRoaXMuY291bnQgKiAwLjIpICsgMSk7XG4gICAgfVxuXG4gICAgdmFyIGl0ZW0gPSB0aGlzLmZyZWVMaXN0LnBvcCgpO1xuXG4gICAgcmV0dXJuIGl0ZW07XG4gIH1cblxuICByZWxlYXNlKGl0ZW0pIHtcbiAgICBpdGVtLnJlc2V0KCk7XG4gICAgdGhpcy5mcmVlTGlzdC5wdXNoKGl0ZW0pO1xuICB9XG5cbiAgZXhwYW5kKGNvdW50KSB7XG4gICAgZm9yICh2YXIgbiA9IDA7IG4gPCBjb3VudDsgbisrKSB7XG4gICAgICB0aGlzLmZyZWVMaXN0LnB1c2godGhpcy5jcmVhdGVFbGVtZW50KCkpO1xuICAgIH1cbiAgICB0aGlzLmNvdW50ICs9IGNvdW50O1xuICB9XG5cbiAgdG90YWxTaXplKCkge1xuICAgIHJldHVybiB0aGlzLmNvdW50O1xuICB9XG5cbiAgdG90YWxGcmVlKCkge1xuICAgIHJldHVybiB0aGlzLmZyZWVMaXN0Lmxlbmd0aDtcbiAgfVxuXG4gIHRvdGFsVXNlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudCAtIHRoaXMuZnJlZUxpc3QubGVuZ3RoO1xuICB9XG59XG4iLCJpbXBvcnQgUXVlcnkgZnJvbSBcIi4vUXVlcnkuanNcIjtcbmltcG9ydCB7IHF1ZXJ5S2V5IH0gZnJvbSBcIi4vVXRpbHMuanNcIjtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQGNsYXNzIFF1ZXJ5TWFuYWdlclxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBRdWVyeU1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcih3b3JsZCkge1xuICAgIHRoaXMuX3dvcmxkID0gd29ybGQ7XG5cbiAgICAvLyBRdWVyaWVzIGluZGV4ZWQgYnkgYSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNvbXBvbmVudHMgaXQgaGFzXG4gICAgdGhpcy5fcXVlcmllcyA9IHt9O1xuICB9XG5cbiAgb25FbnRpdHlSZW1vdmVkKGVudGl0eSkge1xuICAgIGZvciAodmFyIHF1ZXJ5TmFtZSBpbiB0aGlzLl9xdWVyaWVzKSB7XG4gICAgICB2YXIgcXVlcnkgPSB0aGlzLl9xdWVyaWVzW3F1ZXJ5TmFtZV07XG4gICAgICBpZiAoZW50aXR5LnF1ZXJpZXMuaW5kZXhPZihxdWVyeSkgIT09IC0xKSB7XG4gICAgICAgIHF1ZXJ5LnJlbW92ZUVudGl0eShlbnRpdHkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB3aGVuIGEgY29tcG9uZW50IGlzIGFkZGVkIHRvIGFuIGVudGl0eVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IEVudGl0eSB0aGF0IGp1c3QgZ290IHRoZSBuZXcgY29tcG9uZW50XG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnQgQ29tcG9uZW50IGFkZGVkIHRvIHRoZSBlbnRpdHlcbiAgICovXG4gIG9uRW50aXR5Q29tcG9uZW50QWRkZWQoZW50aXR5LCBDb21wb25lbnQpIHtcbiAgICAvLyBAdG9kbyBVc2UgYml0bWFzayBmb3IgY2hlY2tpbmcgY29tcG9uZW50cz9cblxuICAgIC8vIENoZWNrIGVhY2ggaW5kZXhlZCBxdWVyeSB0byBzZWUgaWYgd2UgbmVlZCB0byBhZGQgdGhpcyBlbnRpdHkgdG8gdGhlIGxpc3RcbiAgICBmb3IgKHZhciBxdWVyeU5hbWUgaW4gdGhpcy5fcXVlcmllcykge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcXVlcmllc1txdWVyeU5hbWVdO1xuXG4gICAgICBpZiAoXG4gICAgICAgICEhfnF1ZXJ5Lk5vdENvbXBvbmVudHMuaW5kZXhPZihDb21wb25lbnQpICYmXG4gICAgICAgIH5xdWVyeS5lbnRpdGllcy5pbmRleE9mKGVudGl0eSlcbiAgICAgICkge1xuICAgICAgICBxdWVyeS5yZW1vdmVFbnRpdHkoZW50aXR5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0aGUgZW50aXR5IG9ubHkgaWY6XG4gICAgICAvLyBDb21wb25lbnQgaXMgaW4gdGhlIHF1ZXJ5XG4gICAgICAvLyBhbmQgRW50aXR5IGhhcyBBTEwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHF1ZXJ5XG4gICAgICAvLyBhbmQgRW50aXR5IGlzIG5vdCBhbHJlYWR5IGluIHRoZSBxdWVyeVxuICAgICAgaWYgKFxuICAgICAgICAhfnF1ZXJ5LkNvbXBvbmVudHMuaW5kZXhPZihDb21wb25lbnQpIHx8XG4gICAgICAgICFxdWVyeS5tYXRjaChlbnRpdHkpIHx8XG4gICAgICAgIH5xdWVyeS5lbnRpdGllcy5pbmRleE9mKGVudGl0eSlcbiAgICAgIClcbiAgICAgICAgY29udGludWU7XG5cbiAgICAgIHF1ZXJ5LmFkZEVudGl0eShlbnRpdHkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB3aGVuIGEgY29tcG9uZW50IGlzIHJlbW92ZWQgZnJvbSBhbiBlbnRpdHlcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSBFbnRpdHkgdG8gcmVtb3ZlIHRoZSBjb21wb25lbnQgZnJvbVxuICAgKiBAcGFyYW0ge0NvbXBvbmVudH0gQ29tcG9uZW50IENvbXBvbmVudCB0byByZW1vdmUgZnJvbSB0aGUgZW50aXR5XG4gICAqL1xuICBvbkVudGl0eUNvbXBvbmVudFJlbW92ZWQoZW50aXR5LCBDb21wb25lbnQpIHtcbiAgICBmb3IgKHZhciBxdWVyeU5hbWUgaW4gdGhpcy5fcXVlcmllcykge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcXVlcmllc1txdWVyeU5hbWVdO1xuXG4gICAgICBpZiAoXG4gICAgICAgICEhfnF1ZXJ5Lk5vdENvbXBvbmVudHMuaW5kZXhPZihDb21wb25lbnQpICYmXG4gICAgICAgICF+cXVlcnkuZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpICYmXG4gICAgICAgIHF1ZXJ5Lm1hdGNoKGVudGl0eSlcbiAgICAgICkge1xuICAgICAgICBxdWVyeS5hZGRFbnRpdHkoZW50aXR5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgISF+cXVlcnkuQ29tcG9uZW50cy5pbmRleE9mKENvbXBvbmVudCkgJiZcbiAgICAgICAgISF+cXVlcnkuZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpICYmXG4gICAgICAgICFxdWVyeS5tYXRjaChlbnRpdHkpXG4gICAgICApIHtcbiAgICAgICAgcXVlcnkucmVtb3ZlRW50aXR5KGVudGl0eSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBxdWVyeSBmb3IgdGhlIHNwZWNpZmllZCBjb21wb25lbnRzXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnRzIENvbXBvbmVudHMgdGhhdCB0aGUgcXVlcnkgc2hvdWxkIGhhdmVcbiAgICovXG4gIGdldFF1ZXJ5KENvbXBvbmVudHMpIHtcbiAgICB2YXIga2V5ID0gcXVlcnlLZXkoQ29tcG9uZW50cyk7XG4gICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcXVlcmllc1trZXldO1xuICAgIGlmICghcXVlcnkpIHtcbiAgICAgIHRoaXMuX3F1ZXJpZXNba2V5XSA9IHF1ZXJ5ID0gbmV3IFF1ZXJ5KENvbXBvbmVudHMsIHRoaXMuX3dvcmxkKTtcbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBzb21lIHN0YXRzIGZyb20gdGhpcyBjbGFzc1xuICAgKi9cbiAgc3RhdHMoKSB7XG4gICAgdmFyIHN0YXRzID0ge307XG4gICAgZm9yICh2YXIgcXVlcnlOYW1lIGluIHRoaXMuX3F1ZXJpZXMpIHtcbiAgICAgIHN0YXRzW3F1ZXJ5TmFtZV0gPSB0aGlzLl9xdWVyaWVzW3F1ZXJ5TmFtZV0uc3RhdHMoKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXRzO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgU3lzdGVtU3RhdGVDb21wb25lbnQge31cblxuU3lzdGVtU3RhdGVDb21wb25lbnQuaXNTeXN0ZW1TdGF0ZUNvbXBvbmVudCA9IHRydWU7XG4iLCJpbXBvcnQgRW50aXR5IGZyb20gXCIuL0VudGl0eS5qc1wiO1xuaW1wb3J0IE9iamVjdFBvb2wgZnJvbSBcIi4vT2JqZWN0UG9vbC5qc1wiO1xuaW1wb3J0IFF1ZXJ5TWFuYWdlciBmcm9tIFwiLi9RdWVyeU1hbmFnZXIuanNcIjtcbmltcG9ydCBFdmVudERpc3BhdGNoZXIgZnJvbSBcIi4vRXZlbnREaXNwYXRjaGVyLmpzXCI7XG5pbXBvcnQgeyBjb21wb25lbnRQcm9wZXJ0eU5hbWUsIGdldE5hbWUgfSBmcm9tIFwiLi9VdGlscy5qc1wiO1xuaW1wb3J0IHsgU3lzdGVtU3RhdGVDb21wb25lbnQgfSBmcm9tIFwiLi9TeXN0ZW1TdGF0ZUNvbXBvbmVudC5qc1wiO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAY2xhc3MgRW50aXR5TWFuYWdlclxuICovXG5leHBvcnQgY2xhc3MgRW50aXR5TWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHdvcmxkKSB7XG4gICAgdGhpcy53b3JsZCA9IHdvcmxkO1xuICAgIHRoaXMuY29tcG9uZW50c01hbmFnZXIgPSB3b3JsZC5jb21wb25lbnRzTWFuYWdlcjtcblxuICAgIC8vIEFsbCB0aGUgZW50aXRpZXMgaW4gdGhpcyBpbnN0YW5jZVxuICAgIHRoaXMuX2VudGl0aWVzID0gW107XG5cbiAgICB0aGlzLl9lbnRpdGllc0J5TmFtZXMgPSB7fTtcblxuICAgIHRoaXMuX3F1ZXJ5TWFuYWdlciA9IG5ldyBRdWVyeU1hbmFnZXIodGhpcyk7XG4gICAgdGhpcy5ldmVudERpc3BhdGNoZXIgPSBuZXcgRXZlbnREaXNwYXRjaGVyKCk7XG4gICAgdGhpcy5fZW50aXR5UG9vbCA9IG5ldyBPYmplY3RQb29sKEVudGl0eSk7XG5cbiAgICAvLyBEZWZlcnJlZCBkZWxldGlvblxuICAgIHRoaXMuZW50aXRpZXNXaXRoQ29tcG9uZW50c1RvUmVtb3ZlID0gW107XG4gICAgdGhpcy5lbnRpdGllc1RvUmVtb3ZlID0gW107XG4gICAgdGhpcy5kZWZlcnJlZFJlbW92YWxFbmFibGVkID0gdHJ1ZTtcblxuICAgIHRoaXMubnVtU3RhdGVDb21wb25lbnRzID0gMDtcbiAgfVxuXG4gIGdldEVudGl0eUJ5TmFtZShuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VudGl0aWVzQnlOYW1lc1tuYW1lXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgZW50aXR5XG4gICAqL1xuICBjcmVhdGVFbnRpdHkobmFtZSkge1xuICAgIHZhciBlbnRpdHkgPSB0aGlzLl9lbnRpdHlQb29sLmFxdWlyZSgpO1xuICAgIGVudGl0eS5hbGl2ZSA9IHRydWU7XG4gICAgZW50aXR5Lm5hbWUgPSBuYW1lIHx8IFwiXCI7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIGlmICh0aGlzLl9lbnRpdGllc0J5TmFtZXNbbmFtZV0pIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBFbnRpdHkgbmFtZSAnJHtuYW1lfScgYWxyZWFkeSBleGlzdGApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZW50aXRpZXNCeU5hbWVzW25hbWVdID0gZW50aXR5O1xuICAgICAgfVxuICAgIH1cblxuICAgIGVudGl0eS5fd29ybGQgPSB0aGlzO1xuICAgIHRoaXMuX2VudGl0aWVzLnB1c2goZW50aXR5KTtcbiAgICB0aGlzLmV2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KEVOVElUWV9DUkVBVEVELCBlbnRpdHkpO1xuICAgIHJldHVybiBlbnRpdHk7XG4gIH1cblxuICAvLyBDT01QT05FTlRTXG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvbXBvbmVudCB0byBhbiBlbnRpdHlcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSBFbnRpdHkgd2hlcmUgdGhlIGNvbXBvbmVudCB3aWxsIGJlIGFkZGVkXG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBDb21wb25lbnQgQ29tcG9uZW50IHRvIGJlIGFkZGVkIHRvIHRoZSBlbnRpdHlcbiAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlcyBPcHRpb25hbCB2YWx1ZXMgdG8gcmVwbGFjZSB0aGUgZGVmYXVsdCBhdHRyaWJ1dGVzXG4gICAqL1xuICBlbnRpdHlBZGRDb21wb25lbnQoZW50aXR5LCBDb21wb25lbnQsIHZhbHVlcykge1xuICAgIGlmICh+ZW50aXR5Ll9Db21wb25lbnRUeXBlcy5pbmRleE9mKENvbXBvbmVudCkpIHJldHVybjtcblxuICAgIGVudGl0eS5fQ29tcG9uZW50VHlwZXMucHVzaChDb21wb25lbnQpO1xuXG4gICAgaWYgKENvbXBvbmVudC5fX3Byb3RvX18gPT09IFN5c3RlbVN0YXRlQ29tcG9uZW50KSB7XG4gICAgICB0aGlzLm51bVN0YXRlQ29tcG9uZW50cysrO1xuICAgIH1cblxuICAgIHZhciBjb21wb25lbnRQb29sID0gdGhpcy53b3JsZC5jb21wb25lbnRzTWFuYWdlci5nZXRDb21wb25lbnRzUG9vbChcbiAgICAgIENvbXBvbmVudFxuICAgICk7XG4gICAgdmFyIGNvbXBvbmVudCA9IGNvbXBvbmVudFBvb2wuYXF1aXJlKCk7XG5cbiAgICBlbnRpdHkuX2NvbXBvbmVudHNbQ29tcG9uZW50Lm5hbWVdID0gY29tcG9uZW50O1xuXG4gICAgaWYgKHZhbHVlcykge1xuICAgICAgaWYgKGNvbXBvbmVudC5jb3B5KSB7XG4gICAgICAgIGNvbXBvbmVudC5jb3B5KHZhbHVlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHZhbHVlcykge1xuICAgICAgICAgIGNvbXBvbmVudFtuYW1lXSA9IHZhbHVlc1tuYW1lXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3F1ZXJ5TWFuYWdlci5vbkVudGl0eUNvbXBvbmVudEFkZGVkKGVudGl0eSwgQ29tcG9uZW50KTtcbiAgICB0aGlzLndvcmxkLmNvbXBvbmVudHNNYW5hZ2VyLmNvbXBvbmVudEFkZGVkVG9FbnRpdHkoQ29tcG9uZW50KTtcblxuICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoQ09NUE9ORU5UX0FEREVELCBlbnRpdHksIENvbXBvbmVudCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGEgY29tcG9uZW50IGZyb20gYW4gZW50aXR5XG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgRW50aXR5IHdoaWNoIHdpbGwgZ2V0IHJlbW92ZWQgdGhlIGNvbXBvbmVudFxuICAgKiBAcGFyYW0geyp9IENvbXBvbmVudCBDb21wb25lbnQgdG8gcmVtb3ZlIGZyb20gdGhlIGVudGl0eVxuICAgKiBAcGFyYW0ge0Jvb2x9IGltbWVkaWF0ZWx5IElmIHlvdSB3YW50IHRvIHJlbW92ZSB0aGUgY29tcG9uZW50IGltbWVkaWF0ZWx5IGluc3RlYWQgb2YgZGVmZXJyZWQgKERlZmF1bHQgaXMgZmFsc2UpXG4gICAqL1xuICBlbnRpdHlSZW1vdmVDb21wb25lbnQoZW50aXR5LCBDb21wb25lbnQsIGltbWVkaWF0ZWx5KSB7XG4gICAgdmFyIGluZGV4ID0gZW50aXR5Ll9Db21wb25lbnRUeXBlcy5pbmRleE9mKENvbXBvbmVudCk7XG4gICAgaWYgKCF+aW5kZXgpIHJldHVybjtcblxuICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoQ09NUE9ORU5UX1JFTU9WRSwgZW50aXR5LCBDb21wb25lbnQpO1xuXG4gICAgaWYgKGltbWVkaWF0ZWx5KSB7XG4gICAgICB0aGlzLl9lbnRpdHlSZW1vdmVDb21wb25lbnRTeW5jKGVudGl0eSwgQ29tcG9uZW50LCBpbmRleCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlbnRpdHkuX0NvbXBvbmVudFR5cGVzVG9SZW1vdmUubGVuZ3RoID09PSAwKVxuICAgICAgICB0aGlzLmVudGl0aWVzV2l0aENvbXBvbmVudHNUb1JlbW92ZS5wdXNoKGVudGl0eSk7XG5cbiAgICAgIGVudGl0eS5fQ29tcG9uZW50VHlwZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIGVudGl0eS5fQ29tcG9uZW50VHlwZXNUb1JlbW92ZS5wdXNoKENvbXBvbmVudCk7XG5cbiAgICAgIHZhciBjb21wb25lbnROYW1lID0gZ2V0TmFtZShDb21wb25lbnQpO1xuICAgICAgZW50aXR5Ll9jb21wb25lbnRzVG9SZW1vdmVbY29tcG9uZW50TmFtZV0gPVxuICAgICAgICBlbnRpdHkuX2NvbXBvbmVudHNbY29tcG9uZW50TmFtZV07XG4gICAgICBkZWxldGUgZW50aXR5Ll9jb21wb25lbnRzW2NvbXBvbmVudE5hbWVdO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGVhY2ggaW5kZXhlZCBxdWVyeSB0byBzZWUgaWYgd2UgbmVlZCB0byByZW1vdmUgaXRcbiAgICB0aGlzLl9xdWVyeU1hbmFnZXIub25FbnRpdHlDb21wb25lbnRSZW1vdmVkKGVudGl0eSwgQ29tcG9uZW50KTtcblxuICAgIGlmIChDb21wb25lbnQuX19wcm90b19fID09PSBTeXN0ZW1TdGF0ZUNvbXBvbmVudCkge1xuICAgICAgdGhpcy5udW1TdGF0ZUNvbXBvbmVudHMtLTtcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGVudGl0eSB3YXMgYSBnaG9zdCB3YWl0aW5nIGZvciB0aGUgbGFzdCBzeXN0ZW0gc3RhdGUgY29tcG9uZW50IHRvIGJlIHJlbW92ZWRcbiAgICAgIGlmICh0aGlzLm51bVN0YXRlQ29tcG9uZW50cyA9PT0gMCAmJiAhZW50aXR5LmFsaXZlKSB7XG4gICAgICAgIGVudGl0eS5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfZW50aXR5UmVtb3ZlQ29tcG9uZW50U3luYyhlbnRpdHksIENvbXBvbmVudCwgaW5kZXgpIHtcbiAgICAvLyBSZW1vdmUgVCBsaXN0aW5nIG9uIGVudGl0eSBhbmQgcHJvcGVydHkgcmVmLCB0aGVuIGZyZWUgdGhlIGNvbXBvbmVudC5cbiAgICBlbnRpdHkuX0NvbXBvbmVudFR5cGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgdmFyIHByb3BOYW1lID0gY29tcG9uZW50UHJvcGVydHlOYW1lKENvbXBvbmVudCk7XG4gICAgdmFyIGNvbXBvbmVudE5hbWUgPSBnZXROYW1lKENvbXBvbmVudCk7XG4gICAgdmFyIGNvbXBvbmVudCA9IGVudGl0eS5fY29tcG9uZW50c1tjb21wb25lbnROYW1lXTtcbiAgICBkZWxldGUgZW50aXR5Ll9jb21wb25lbnRzW2NvbXBvbmVudE5hbWVdO1xuICAgIHRoaXMuY29tcG9uZW50c01hbmFnZXIuX2NvbXBvbmVudFBvb2xbcHJvcE5hbWVdLnJlbGVhc2UoY29tcG9uZW50KTtcbiAgICB0aGlzLndvcmxkLmNvbXBvbmVudHNNYW5hZ2VyLmNvbXBvbmVudFJlbW92ZWRGcm9tRW50aXR5KENvbXBvbmVudCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCB0aGUgY29tcG9uZW50cyBmcm9tIGFuIGVudGl0eVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IEVudGl0eSBmcm9tIHdoaWNoIHRoZSBjb21wb25lbnRzIHdpbGwgYmUgcmVtb3ZlZFxuICAgKi9cbiAgZW50aXR5UmVtb3ZlQWxsQ29tcG9uZW50cyhlbnRpdHksIGltbWVkaWF0ZWx5KSB7XG4gICAgbGV0IENvbXBvbmVudHMgPSBlbnRpdHkuX0NvbXBvbmVudFR5cGVzO1xuXG4gICAgZm9yIChsZXQgaiA9IENvbXBvbmVudHMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgIGlmIChDb21wb25lbnRzW2pdLl9fcHJvdG9fXyAhPT0gU3lzdGVtU3RhdGVDb21wb25lbnQpXG4gICAgICAgIHRoaXMuZW50aXR5UmVtb3ZlQ29tcG9uZW50KGVudGl0eSwgQ29tcG9uZW50c1tqXSwgaW1tZWRpYXRlbHkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGVudGl0eSBmcm9tIHRoaXMgbWFuYWdlci4gSXQgd2lsbCBjbGVhciBhbHNvIGl0cyBjb21wb25lbnRzXG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgRW50aXR5IHRvIHJlbW92ZSBmcm9tIHRoZSBtYW5hZ2VyXG4gICAqIEBwYXJhbSB7Qm9vbH0gaW1tZWRpYXRlbHkgSWYgeW91IHdhbnQgdG8gcmVtb3ZlIHRoZSBjb21wb25lbnQgaW1tZWRpYXRlbHkgaW5zdGVhZCBvZiBkZWZlcnJlZCAoRGVmYXVsdCBpcyBmYWxzZSlcbiAgICovXG4gIHJlbW92ZUVudGl0eShlbnRpdHksIGltbWVkaWF0ZWx5KSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5fZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpO1xuXG4gICAgaWYgKCF+aW5kZXgpIHRocm93IG5ldyBFcnJvcihcIlRyaWVkIHRvIHJlbW92ZSBlbnRpdHkgbm90IGluIGxpc3RcIik7XG5cbiAgICBlbnRpdHkuYWxpdmUgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLm51bVN0YXRlQ29tcG9uZW50cyA9PT0gMCkge1xuICAgICAgLy8gUmVtb3ZlIGZyb20gZW50aXR5IGxpc3RcbiAgICAgIHRoaXMuZXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoRXZlbnQoRU5USVRZX1JFTU9WRUQsIGVudGl0eSk7XG4gICAgICB0aGlzLl9xdWVyeU1hbmFnZXIub25FbnRpdHlSZW1vdmVkKGVudGl0eSk7XG4gICAgICBpZiAoaW1tZWRpYXRlbHkgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5fcmVsZWFzZUVudGl0eShlbnRpdHksIGluZGV4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZW50aXRpZXNUb1JlbW92ZS5wdXNoKGVudGl0eSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5lbnRpdHlSZW1vdmVBbGxDb21wb25lbnRzKGVudGl0eSwgaW1tZWRpYXRlbHkpO1xuICB9XG5cbiAgX3JlbGVhc2VFbnRpdHkoZW50aXR5LCBpbmRleCkge1xuICAgIHRoaXMuX2VudGl0aWVzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICAvLyBQcmV2ZW50IGFueSBhY2Nlc3MgYW5kIGZyZWVcbiAgICBlbnRpdHkuX3dvcmxkID0gbnVsbDtcbiAgICB0aGlzLl9lbnRpdHlQb29sLnJlbGVhc2UoZW50aXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIGVudGl0aWVzIGZyb20gdGhpcyBtYW5hZ2VyXG4gICAqL1xuICByZW1vdmVBbGxFbnRpdGllcygpIHtcbiAgICBmb3IgKHZhciBpID0gdGhpcy5fZW50aXRpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHRoaXMucmVtb3ZlRW50aXR5KHRoaXMuX2VudGl0aWVzW2ldKTtcbiAgICB9XG4gIH1cblxuICBwcm9jZXNzRGVmZXJyZWRSZW1vdmFsKCkge1xuICAgIGlmICghdGhpcy5kZWZlcnJlZFJlbW92YWxFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVudGl0aWVzVG9SZW1vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBlbnRpdHkgPSB0aGlzLmVudGl0aWVzVG9SZW1vdmVbaV07XG4gICAgICBsZXQgaW5kZXggPSB0aGlzLl9lbnRpdGllcy5pbmRleE9mKGVudGl0eSk7XG4gICAgICB0aGlzLl9yZWxlYXNlRW50aXR5KGVudGl0eSwgaW5kZXgpO1xuICAgIH1cbiAgICB0aGlzLmVudGl0aWVzVG9SZW1vdmUubGVuZ3RoID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbnRpdGllc1dpdGhDb21wb25lbnRzVG9SZW1vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBlbnRpdHkgPSB0aGlzLmVudGl0aWVzV2l0aENvbXBvbmVudHNUb1JlbW92ZVtpXTtcbiAgICAgIHdoaWxlIChlbnRpdHkuX0NvbXBvbmVudFR5cGVzVG9SZW1vdmUubGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgQ29tcG9uZW50ID0gZW50aXR5Ll9Db21wb25lbnRUeXBlc1RvUmVtb3ZlLnBvcCgpO1xuXG4gICAgICAgIHZhciBwcm9wTmFtZSA9IGNvbXBvbmVudFByb3BlcnR5TmFtZShDb21wb25lbnQpO1xuICAgICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGdldE5hbWUoQ29tcG9uZW50KTtcbiAgICAgICAgdmFyIGNvbXBvbmVudCA9IGVudGl0eS5fY29tcG9uZW50c1RvUmVtb3ZlW2NvbXBvbmVudE5hbWVdO1xuICAgICAgICBkZWxldGUgZW50aXR5Ll9jb21wb25lbnRzVG9SZW1vdmVbY29tcG9uZW50TmFtZV07XG4gICAgICAgIHRoaXMuY29tcG9uZW50c01hbmFnZXIuX2NvbXBvbmVudFBvb2xbcHJvcE5hbWVdLnJlbGVhc2UoY29tcG9uZW50KTtcbiAgICAgICAgdGhpcy53b3JsZC5jb21wb25lbnRzTWFuYWdlci5jb21wb25lbnRSZW1vdmVkRnJvbUVudGl0eShDb21wb25lbnQpO1xuXG4gICAgICAgIC8vdGhpcy5fZW50aXR5UmVtb3ZlQ29tcG9uZW50U3luYyhlbnRpdHksIENvbXBvbmVudCwgaW5kZXgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZW50aXRpZXNXaXRoQ29tcG9uZW50c1RvUmVtb3ZlLmxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgcXVlcnkgYmFzZWQgb24gYSBsaXN0IG9mIGNvbXBvbmVudHNcbiAgICogQHBhcmFtIHtBcnJheShDb21wb25lbnQpfSBDb21wb25lbnRzIExpc3Qgb2YgY29tcG9uZW50cyB0aGF0IHdpbGwgZm9ybSB0aGUgcXVlcnlcbiAgICovXG4gIHF1ZXJ5Q29tcG9uZW50cyhDb21wb25lbnRzKSB7XG4gICAgcmV0dXJuIHRoaXMuX3F1ZXJ5TWFuYWdlci5nZXRRdWVyeShDb21wb25lbnRzKTtcbiAgfVxuXG4gIC8vIEVYVFJBU1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gbnVtYmVyIG9mIGVudGl0aWVzXG4gICAqL1xuICBjb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZW50aXRpZXMubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBzb21lIHN0YXRzXG4gICAqL1xuICBzdGF0cygpIHtcbiAgICB2YXIgc3RhdHMgPSB7XG4gICAgICBudW1FbnRpdGllczogdGhpcy5fZW50aXRpZXMubGVuZ3RoLFxuICAgICAgbnVtUXVlcmllczogT2JqZWN0LmtleXModGhpcy5fcXVlcnlNYW5hZ2VyLl9xdWVyaWVzKS5sZW5ndGgsXG4gICAgICBxdWVyaWVzOiB0aGlzLl9xdWVyeU1hbmFnZXIuc3RhdHMoKSxcbiAgICAgIG51bUNvbXBvbmVudFBvb2w6IE9iamVjdC5rZXlzKHRoaXMuY29tcG9uZW50c01hbmFnZXIuX2NvbXBvbmVudFBvb2wpXG4gICAgICAgIC5sZW5ndGgsXG4gICAgICBjb21wb25lbnRQb29sOiB7fSxcbiAgICAgIGV2ZW50RGlzcGF0Y2hlcjogdGhpcy5ldmVudERpc3BhdGNoZXIuc3RhdHNcbiAgICB9O1xuXG4gICAgZm9yICh2YXIgY25hbWUgaW4gdGhpcy5jb21wb25lbnRzTWFuYWdlci5fY29tcG9uZW50UG9vbCkge1xuICAgICAgdmFyIHBvb2wgPSB0aGlzLmNvbXBvbmVudHNNYW5hZ2VyLl9jb21wb25lbnRQb29sW2NuYW1lXTtcbiAgICAgIHN0YXRzLmNvbXBvbmVudFBvb2xbY25hbWVdID0ge1xuICAgICAgICB1c2VkOiBwb29sLnRvdGFsVXNlZCgpLFxuICAgICAgICBzaXplOiBwb29sLmNvdW50XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBzdGF0cztcbiAgfVxufVxuXG5jb25zdCBFTlRJVFlfQ1JFQVRFRCA9IFwiRW50aXR5TWFuYWdlciNFTlRJVFlfQ1JFQVRFXCI7XG5jb25zdCBFTlRJVFlfUkVNT1ZFRCA9IFwiRW50aXR5TWFuYWdlciNFTlRJVFlfUkVNT1ZFRFwiO1xuY29uc3QgQ09NUE9ORU5UX0FEREVEID0gXCJFbnRpdHlNYW5hZ2VyI0NPTVBPTkVOVF9BRERFRFwiO1xuY29uc3QgQ09NUE9ORU5UX1JFTU9WRSA9IFwiRW50aXR5TWFuYWdlciNDT01QT05FTlRfUkVNT1ZFXCI7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEdW1teU9iamVjdFBvb2wge1xuICBjb25zdHJ1Y3RvcihUKSB7XG4gICAgdGhpcy5pc0R1bW15T2JqZWN0UG9vbCA9IHRydWU7XG4gICAgdGhpcy5jb3VudCA9IDA7XG4gICAgdGhpcy51c2VkID0gMDtcbiAgICB0aGlzLlQgPSBUO1xuICB9XG5cbiAgYXF1aXJlKCkge1xuICAgIHRoaXMudXNlZCsrO1xuICAgIHRoaXMuY291bnQrKztcbiAgICByZXR1cm4gbmV3IHRoaXMuVCgpO1xuICB9XG5cbiAgcmVsZWFzZSgpIHtcbiAgICB0aGlzLnVzZWQtLTtcbiAgfVxuXG4gIHRvdGFsU2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudDtcbiAgfVxuXG4gIHRvdGFsRnJlZSgpIHtcbiAgICByZXR1cm4gSW5maW5pdHk7XG4gIH1cblxuICB0b3RhbFVzZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlZDtcbiAgfVxufVxuIiwiaW1wb3J0IE9iamVjdFBvb2wgZnJvbSBcIi4vT2JqZWN0UG9vbC5qc1wiO1xuaW1wb3J0IER1bW15T2JqZWN0UG9vbCBmcm9tIFwiLi9EdW1teU9iamVjdFBvb2wuanNcIjtcbmltcG9ydCB7IGNvbXBvbmVudFByb3BlcnR5TmFtZSB9IGZyb20gXCIuL1V0aWxzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBDb21wb25lbnRNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5Db21wb25lbnRzID0ge307XG4gICAgdGhpcy5fY29tcG9uZW50UG9vbCA9IHt9O1xuICAgIHRoaXMubnVtQ29tcG9uZW50cyA9IHt9O1xuICB9XG5cbiAgcmVnaXN0ZXJDb21wb25lbnQoQ29tcG9uZW50KSB7XG4gICAgaWYgKHRoaXMuQ29tcG9uZW50c1tDb21wb25lbnQubmFtZV0pIHtcbiAgICAgIGNvbnNvbGUud2FybihgQ29tcG9uZW50IHR5cGU6ICcke0NvbXBvbmVudC5uYW1lfScgYWxyZWFkeSByZWdpc3RlcmVkLmApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuQ29tcG9uZW50c1tDb21wb25lbnQubmFtZV0gPSBDb21wb25lbnQ7XG4gICAgdGhpcy5udW1Db21wb25lbnRzW0NvbXBvbmVudC5uYW1lXSA9IDA7XG4gIH1cblxuICBjb21wb25lbnRBZGRlZFRvRW50aXR5KENvbXBvbmVudCkge1xuICAgIGlmICghdGhpcy5Db21wb25lbnRzW0NvbXBvbmVudC5uYW1lXSkge1xuICAgICAgdGhpcy5yZWdpc3RlckNvbXBvbmVudChDb21wb25lbnQpO1xuICAgIH1cblxuICAgIHRoaXMubnVtQ29tcG9uZW50c1tDb21wb25lbnQubmFtZV0rKztcbiAgfVxuXG4gIGNvbXBvbmVudFJlbW92ZWRGcm9tRW50aXR5KENvbXBvbmVudCkge1xuICAgIHRoaXMubnVtQ29tcG9uZW50c1tDb21wb25lbnQubmFtZV0tLTtcbiAgfVxuXG4gIGdldENvbXBvbmVudHNQb29sKENvbXBvbmVudCkge1xuICAgIHZhciBjb21wb25lbnROYW1lID0gY29tcG9uZW50UHJvcGVydHlOYW1lKENvbXBvbmVudCk7XG5cbiAgICBpZiAoIXRoaXMuX2NvbXBvbmVudFBvb2xbY29tcG9uZW50TmFtZV0pIHtcbiAgICAgIGlmIChDb21wb25lbnQucHJvdG90eXBlLnJlc2V0KSB7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudFBvb2xbY29tcG9uZW50TmFtZV0gPSBuZXcgT2JqZWN0UG9vbChDb21wb25lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBDb21wb25lbnQgJyR7Q29tcG9uZW50Lm5hbWV9JyB3b24ndCBiZW5lZml0IGZyb20gcG9vbGluZyBiZWNhdXNlICdyZXNldCcgbWV0aG9kIHdhcyBub3QgaW1wbGVtZW50ZWQuYFxuICAgICAgICApO1xuICAgICAgICB0aGlzLl9jb21wb25lbnRQb29sW2NvbXBvbmVudE5hbWVdID0gbmV3IER1bW15T2JqZWN0UG9vbChDb21wb25lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRQb29sW2NvbXBvbmVudE5hbWVdO1xuICB9XG59XG4iLCJpbXBvcnQgcGpzb24gZnJvbSBcIi4uL3BhY2thZ2UuanNvblwiO1xuZXhwb3J0IGNvbnN0IFZlcnNpb24gPSBwanNvbi52ZXJzaW9uO1xuIiwiaW1wb3J0IHsgU3lzdGVtTWFuYWdlciB9IGZyb20gXCIuL1N5c3RlbU1hbmFnZXIuanNcIjtcbmltcG9ydCB7IEVudGl0eU1hbmFnZXIgfSBmcm9tIFwiLi9FbnRpdHlNYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBDb21wb25lbnRNYW5hZ2VyIH0gZnJvbSBcIi4vQ29tcG9uZW50TWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgVmVyc2lvbiB9IGZyb20gXCIuL1ZlcnNpb24uanNcIjtcblxuZXhwb3J0IGNsYXNzIFdvcmxkIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb21wb25lbnRzTWFuYWdlciA9IG5ldyBDb21wb25lbnRNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMuZW50aXR5TWFuYWdlciA9IG5ldyBFbnRpdHlNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMuc3lzdGVtTWFuYWdlciA9IG5ldyBTeXN0ZW1NYW5hZ2VyKHRoaXMpO1xuXG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcblxuICAgIHRoaXMuZXZlbnRRdWV1ZXMgPSB7fTtcblxuICAgIGlmICh0eXBlb2YgQ3VzdG9tRXZlbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHZhciBldmVudCA9IG5ldyBDdXN0b21FdmVudChcImVjc3ktd29ybGQtY3JlYXRlZFwiLCB7XG4gICAgICAgIGRldGFpbDogeyB3b3JsZDogdGhpcywgdmVyc2lvbjogVmVyc2lvbiB9XG4gICAgICB9KTtcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLmxhc3RUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gIH1cblxuICByZWdpc3RlckNvbXBvbmVudChDb21wb25lbnQpIHtcbiAgICB0aGlzLmNvbXBvbmVudHNNYW5hZ2VyLnJlZ2lzdGVyQ29tcG9uZW50KENvbXBvbmVudCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICByZWdpc3RlclN5c3RlbShTeXN0ZW0sIGF0dHJpYnV0ZXMpIHtcbiAgICB0aGlzLnN5c3RlbU1hbmFnZXIucmVnaXN0ZXJTeXN0ZW0oU3lzdGVtLCBhdHRyaWJ1dGVzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldFN5c3RlbShTeXN0ZW1DbGFzcykge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbU1hbmFnZXIuZ2V0U3lzdGVtKFN5c3RlbUNsYXNzKTtcbiAgfVxuXG4gIGdldFN5c3RlbXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtTWFuYWdlci5nZXRTeXN0ZW1zKCk7XG4gIH1cblxuICBleGVjdXRlKGRlbHRhLCB0aW1lKSB7XG4gICAgaWYgKCFkZWx0YSkge1xuICAgICAgbGV0IHRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIGRlbHRhID0gdGltZSAtIHRoaXMubGFzdFRpbWU7XG4gICAgICB0aGlzLmxhc3RUaW1lID0gdGltZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lbmFibGVkKSB7XG4gICAgICB0aGlzLnN5c3RlbU1hbmFnZXIuZXhlY3V0ZShkZWx0YSwgdGltZSk7XG4gICAgICB0aGlzLmVudGl0eU1hbmFnZXIucHJvY2Vzc0RlZmVycmVkUmVtb3ZhbCgpO1xuICAgIH1cbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgdGhpcy5lbmFibGVkID0gZmFsc2U7XG4gIH1cblxuICBwbGF5KCkge1xuICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG4gIH1cblxuICBjcmVhdGVFbnRpdHkobmFtZSkge1xuICAgIHJldHVybiB0aGlzLmVudGl0eU1hbmFnZXIuY3JlYXRlRW50aXR5KG5hbWUpO1xuICB9XG5cbiAgc3RhdHMoKSB7XG4gICAgdmFyIHN0YXRzID0ge1xuICAgICAgZW50aXRpZXM6IHRoaXMuZW50aXR5TWFuYWdlci5zdGF0cygpLFxuICAgICAgc3lzdGVtOiB0aGlzLnN5c3RlbU1hbmFnZXIuc3RhdHMoKVxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShzdGF0cywgbnVsbCwgMikpO1xuICB9XG59XG4iLCJpbXBvcnQgUXVlcnkgZnJvbSBcIi4vUXVlcnkuanNcIjtcblxuZXhwb3J0IGNsYXNzIFN5c3RlbSB7XG4gIGNhbkV4ZWN1dGUoKSB7XG4gICAgaWYgKHRoaXMuX21hbmRhdG9yeVF1ZXJpZXMubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbWFuZGF0b3J5UXVlcmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fbWFuZGF0b3J5UXVlcmllc1tpXTtcbiAgICAgIGlmIChxdWVyeS5lbnRpdGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY29uc3RydWN0b3Iod29ybGQsIGF0dHJpYnV0ZXMpIHtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcblxuICAgIC8vIEB0b2RvIEJldHRlciBuYW1pbmcgOilcbiAgICB0aGlzLl9xdWVyaWVzID0ge307XG4gICAgdGhpcy5xdWVyaWVzID0ge307XG5cbiAgICB0aGlzLnByaW9yaXR5ID0gMDtcblxuICAgIC8vIFVzZWQgZm9yIHN0YXRzXG4gICAgdGhpcy5leGVjdXRlVGltZSA9IDA7XG5cbiAgICBpZiAoYXR0cmlidXRlcyAmJiBhdHRyaWJ1dGVzLnByaW9yaXR5KSB7XG4gICAgICB0aGlzLnByaW9yaXR5ID0gYXR0cmlidXRlcy5wcmlvcml0eTtcbiAgICB9XG5cbiAgICB0aGlzLl9tYW5kYXRvcnlRdWVyaWVzID0gW107XG5cbiAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLnF1ZXJpZXMpIHtcbiAgICAgIGZvciAodmFyIHF1ZXJ5TmFtZSBpbiB0aGlzLmNvbnN0cnVjdG9yLnF1ZXJpZXMpIHtcbiAgICAgICAgdmFyIHF1ZXJ5Q29uZmlnID0gdGhpcy5jb25zdHJ1Y3Rvci5xdWVyaWVzW3F1ZXJ5TmFtZV07XG4gICAgICAgIHZhciBDb21wb25lbnRzID0gcXVlcnlDb25maWcuY29tcG9uZW50cztcbiAgICAgICAgaWYgKCFDb21wb25lbnRzIHx8IENvbXBvbmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ2NvbXBvbmVudHMnIGF0dHJpYnV0ZSBjYW4ndCBiZSBlbXB0eSBpbiBhIHF1ZXJ5XCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBxdWVyeSA9IHRoaXMud29ybGQuZW50aXR5TWFuYWdlci5xdWVyeUNvbXBvbmVudHMoQ29tcG9uZW50cyk7XG4gICAgICAgIHRoaXMuX3F1ZXJpZXNbcXVlcnlOYW1lXSA9IHF1ZXJ5O1xuICAgICAgICBpZiAocXVlcnlDb25maWcubWFuZGF0b3J5ID09PSB0cnVlKSB7XG4gICAgICAgICAgdGhpcy5fbWFuZGF0b3J5UXVlcmllcy5wdXNoKHF1ZXJ5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXJpZXNbcXVlcnlOYW1lXSA9IHtcbiAgICAgICAgICByZXN1bHRzOiBxdWVyeS5lbnRpdGllc1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFJlYWN0aXZlIGNvbmZpZ3VyYXRpb24gYWRkZWQvcmVtb3ZlZC9jaGFuZ2VkXG4gICAgICAgIHZhciB2YWxpZEV2ZW50cyA9IFtcImFkZGVkXCIsIFwicmVtb3ZlZFwiLCBcImNoYW5nZWRcIl07XG5cbiAgICAgICAgY29uc3QgZXZlbnRNYXBwaW5nID0ge1xuICAgICAgICAgIGFkZGVkOiBRdWVyeS5wcm90b3R5cGUuRU5USVRZX0FEREVELFxuICAgICAgICAgIHJlbW92ZWQ6IFF1ZXJ5LnByb3RvdHlwZS5FTlRJVFlfUkVNT1ZFRCxcbiAgICAgICAgICBjaGFuZ2VkOiBRdWVyeS5wcm90b3R5cGUuQ09NUE9ORU5UX0NIQU5HRUQgLy8gUXVlcnkucHJvdG90eXBlLkVOVElUWV9DSEFOR0VEXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHF1ZXJ5Q29uZmlnLmxpc3Rlbikge1xuICAgICAgICAgIHZhbGlkRXZlbnRzLmZvckVhY2goZXZlbnROYW1lID0+IHtcbiAgICAgICAgICAgIC8vIElzIHRoZSBldmVudCBlbmFibGVkIG9uIHRoaXMgc3lzdGVtJ3MgcXVlcnk/XG4gICAgICAgICAgICBpZiAocXVlcnlDb25maWcubGlzdGVuW2V2ZW50TmFtZV0pIHtcbiAgICAgICAgICAgICAgbGV0IGV2ZW50ID0gcXVlcnlDb25maWcubGlzdGVuW2V2ZW50TmFtZV07XG5cbiAgICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSA9PT0gXCJjaGFuZ2VkXCIpIHtcbiAgICAgICAgICAgICAgICBxdWVyeS5yZWFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAvLyBBbnkgY2hhbmdlIG9uIHRoZSBlbnRpdHkgZnJvbSB0aGUgY29tcG9uZW50cyBpbiB0aGUgcXVlcnlcbiAgICAgICAgICAgICAgICAgIGxldCBldmVudExpc3QgPSAodGhpcy5xdWVyaWVzW3F1ZXJ5TmFtZV1bZXZlbnROYW1lXSA9IFtdKTtcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5LmV2ZW50RGlzcGF0Y2hlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICBRdWVyeS5wcm90b3R5cGUuQ09NUE9ORU5UX0NIQU5HRUQsXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gQXZvaWQgZHVwbGljYXRlc1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudExpc3QuaW5kZXhPZihlbnRpdHkpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRMaXN0LnB1c2goZW50aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgbGV0IGV2ZW50TGlzdCA9ICh0aGlzLnF1ZXJpZXNbcXVlcnlOYW1lXVtldmVudE5hbWVdID0gW10pO1xuICAgICAgICAgICAgICAgICAgcXVlcnkuZXZlbnREaXNwYXRjaGVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICAgIFF1ZXJ5LnByb3RvdHlwZS5DT01QT05FTlRfQ0hBTkdFRCxcbiAgICAgICAgICAgICAgICAgICAgKGVudGl0eSwgY2hhbmdlZENvbXBvbmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIEF2b2lkIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5pbmRleE9mKGNoYW5nZWRDb21wb25lbnQuY29uc3RydWN0b3IpICE9PSAtMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRMaXN0LmluZGV4T2YoZW50aXR5KSA9PT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGlzdC5wdXNoKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgLy8gQ2hlY2tpbmcganVzdCBzcGVjaWZpYyBjb21wb25lbnRzXG4gICAgICAgICAgICAgICAgICBsZXQgY2hhbmdlZExpc3QgPSAodGhpcy5xdWVyaWVzW3F1ZXJ5TmFtZV1bZXZlbnROYW1lXSA9IHt9KTtcbiAgICAgICAgICAgICAgICAgIGV2ZW50LmZvckVhY2goY29tcG9uZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV2ZW50TGlzdCA9IChjaGFuZ2VkTGlzdFtcbiAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRQcm9wZXJ0eU5hbWUoY29tcG9uZW50KVxuICAgICAgICAgICAgICAgICAgICBdID0gW10pO1xuICAgICAgICAgICAgICAgICAgICBxdWVyeS5ldmVudERpc3BhdGNoZXIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAgICAgICBRdWVyeS5wcm90b3R5cGUuQ09NUE9ORU5UX0NIQU5HRUQsXG4gICAgICAgICAgICAgICAgICAgICAgKGVudGl0eSwgY2hhbmdlZENvbXBvbmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkQ29tcG9uZW50LmNvbnN0cnVjdG9yID09PSBjb21wb25lbnQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRMaXN0LmluZGV4T2YoZW50aXR5KSA9PT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudExpc3QucHVzaChlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGV2ZW50TGlzdCA9ICh0aGlzLnF1ZXJpZXNbcXVlcnlOYW1lXVtldmVudE5hbWVdID0gW10pO1xuXG4gICAgICAgICAgICAgICAgcXVlcnkuZXZlbnREaXNwYXRjaGVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICBldmVudE1hcHBpbmdbZXZlbnROYW1lXSxcbiAgICAgICAgICAgICAgICAgIGVudGl0eSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEBmaXhtZSBvdmVyaGVhZD9cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50TGlzdC5pbmRleE9mKGVudGl0eSkgPT09IC0xKVxuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGlzdC5wdXNoKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICB0aGlzLmV4ZWN1dGVUaW1lID0gMDtcbiAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHBsYXkoKSB7XG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIEBxdWVzdGlvbiByZW5hbWUgdG8gY2xlYXIgcXVldWVzP1xuICBjbGVhckV2ZW50cygpIHtcbiAgICBmb3IgKGxldCBxdWVyeU5hbWUgaW4gdGhpcy5xdWVyaWVzKSB7XG4gICAgICB2YXIgcXVlcnkgPSB0aGlzLnF1ZXJpZXNbcXVlcnlOYW1lXTtcbiAgICAgIGlmIChxdWVyeS5hZGRlZCkge1xuICAgICAgICBxdWVyeS5hZGRlZC5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgICAgaWYgKHF1ZXJ5LnJlbW92ZWQpIHtcbiAgICAgICAgcXVlcnkucmVtb3ZlZC5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgICAgaWYgKHF1ZXJ5LmNoYW5nZWQpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocXVlcnkuY2hhbmdlZCkpIHtcbiAgICAgICAgICBxdWVyeS5jaGFuZ2VkLmxlbmd0aCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBxdWVyeS5jaGFuZ2VkKSB7XG4gICAgICAgICAgICBxdWVyeS5jaGFuZ2VkW25hbWVdLmxlbmd0aCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIHZhciBqc29uID0ge1xuICAgICAgbmFtZTogdGhpcy5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgZW5hYmxlZDogdGhpcy5lbmFibGVkLFxuICAgICAgZXhlY3V0ZVRpbWU6IHRoaXMuZXhlY3V0ZVRpbWUsXG4gICAgICBwcmlvcml0eTogdGhpcy5wcmlvcml0eSxcbiAgICAgIHF1ZXJpZXM6IHt9XG4gICAgfTtcblxuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLnF1ZXJpZXMpIHtcbiAgICAgIHZhciBxdWVyaWVzID0gdGhpcy5jb25zdHJ1Y3Rvci5xdWVyaWVzO1xuICAgICAgZm9yIChsZXQgcXVlcnlOYW1lIGluIHF1ZXJpZXMpIHtcbiAgICAgICAgbGV0IHF1ZXJ5ID0gdGhpcy5xdWVyaWVzW3F1ZXJ5TmFtZV07XG4gICAgICAgIGxldCBxdWVyeURlZmluaXRpb24gPSBxdWVyaWVzW3F1ZXJ5TmFtZV07XG4gICAgICAgIGxldCBqc29uUXVlcnkgPSAoanNvbi5xdWVyaWVzW3F1ZXJ5TmFtZV0gPSB7XG4gICAgICAgICAga2V5OiB0aGlzLl9xdWVyaWVzW3F1ZXJ5TmFtZV0ua2V5XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGpzb25RdWVyeS5tYW5kYXRvcnkgPSBxdWVyeURlZmluaXRpb24ubWFuZGF0b3J5ID09PSB0cnVlO1xuICAgICAgICBqc29uUXVlcnkucmVhY3RpdmUgPVxuICAgICAgICAgIHF1ZXJ5RGVmaW5pdGlvbi5saXN0ZW4gJiZcbiAgICAgICAgICAocXVlcnlEZWZpbml0aW9uLmxpc3Rlbi5hZGRlZCA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgcXVlcnlEZWZpbml0aW9uLmxpc3Rlbi5yZW1vdmVkID09PSB0cnVlIHx8XG4gICAgICAgICAgICBxdWVyeURlZmluaXRpb24ubGlzdGVuLmNoYW5nZWQgPT09IHRydWUgfHxcbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkocXVlcnlEZWZpbml0aW9uLmxpc3Rlbi5jaGFuZ2VkKSk7XG5cbiAgICAgICAgaWYgKGpzb25RdWVyeS5yZWFjdGl2ZSkge1xuICAgICAgICAgIGpzb25RdWVyeS5saXN0ZW4gPSB7fTtcblxuICAgICAgICAgIGNvbnN0IG1ldGhvZHMgPSBbXCJhZGRlZFwiLCBcInJlbW92ZWRcIiwgXCJjaGFuZ2VkXCJdO1xuICAgICAgICAgIG1ldGhvZHMuZm9yRWFjaChtZXRob2QgPT4ge1xuICAgICAgICAgICAgaWYgKHF1ZXJ5W21ldGhvZF0pIHtcbiAgICAgICAgICAgICAganNvblF1ZXJ5Lmxpc3RlblttZXRob2RdID0ge1xuICAgICAgICAgICAgICAgIGVudGl0aWVzOiBxdWVyeVttZXRob2RdLmxlbmd0aFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGpzb247XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIE5vdChDb21wb25lbnQpIHtcbiAgcmV0dXJuIHtcbiAgICBvcGVyYXRvcjogXCJub3RcIixcbiAgICBDb21wb25lbnQ6IENvbXBvbmVudFxuICB9O1xufVxuIiwiZXhwb3J0IGNsYXNzIENvbXBvbmVudCB7fVxuXG5Db21wb25lbnQuaXNDb21wb25lbnQgPSB0cnVlO1xuIiwiZXhwb3J0IGNsYXNzIFRhZ0NvbXBvbmVudCB7XG4gIHJlc2V0KCkge31cbn1cblxuVGFnQ29tcG9uZW50LmlzVGFnQ29tcG9uZW50ID0gdHJ1ZTtcbiIsImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUeXBlKHR5cGVEZWZpbml0aW9uKSB7XG4gIHZhciBtYW5kYXRvcnlGdW5jdGlvbnMgPSBbXG4gICAgXCJjcmVhdGVcIixcbiAgICBcInJlc2V0XCIsXG4gICAgXCJjbGVhclwiXG4gICAgLypcImNvcHlcIiovXG4gIF07XG5cbiAgdmFyIHVuZGVmaW5lZEZ1bmN0aW9ucyA9IG1hbmRhdG9yeUZ1bmN0aW9ucy5maWx0ZXIoZiA9PiB7XG4gICAgcmV0dXJuICF0eXBlRGVmaW5pdGlvbltmXTtcbiAgfSk7XG5cbiAgaWYgKHVuZGVmaW5lZEZ1bmN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYGNyZWF0ZVR5cGUgZXhwZWN0IHR5cGUgZGVmaW5pdGlvbiB0byBpbXBsZW1lbnRzIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zOiAke3VuZGVmaW5lZEZ1bmN0aW9ucy5qb2luKFxuICAgICAgICBcIiwgXCJcbiAgICAgICl9YFxuICAgICk7XG4gIH1cblxuICB0eXBlRGVmaW5pdGlvbi5pc1R5cGUgPSB0cnVlO1xuICByZXR1cm4gdHlwZURlZmluaXRpb247XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVUeXBlIH0gZnJvbSBcIi4vQ3JlYXRlVHlwZVwiO1xuXG4vKipcbiAqIFN0YW5kYXJkIHR5cGVzXG4gKi9cbnZhciBUeXBlcyA9IHt9O1xuXG5UeXBlcy5OdW1iZXIgPSBjcmVhdGVUeXBlKHtcbiAgYmFzZVR5cGU6IE51bWJlcixcbiAgaXNTaW1wbGVUeXBlOiB0cnVlLFxuICBjcmVhdGU6IGRlZmF1bHRWYWx1ZSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09IFwidW5kZWZpbmVkXCIgPyBkZWZhdWx0VmFsdWUgOiAwO1xuICB9LFxuICByZXNldDogKHNyYywga2V5LCBkZWZhdWx0VmFsdWUpID0+IHtcbiAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc3JjW2tleV0gPSBkZWZhdWx0VmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNyY1trZXldID0gMDtcbiAgICB9XG4gIH0sXG4gIGNsZWFyOiAoc3JjLCBrZXkpID0+IHtcbiAgICBzcmNba2V5XSA9IDA7XG4gIH1cbn0pO1xuXG5UeXBlcy5Cb29sZWFuID0gY3JlYXRlVHlwZSh7XG4gIGJhc2VUeXBlOiBCb29sZWFuLFxuICBpc1NpbXBsZVR5cGU6IHRydWUsXG4gIGNyZWF0ZTogZGVmYXVsdFZhbHVlID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiA/IGRlZmF1bHRWYWx1ZSA6IGZhbHNlO1xuICB9LFxuICByZXNldDogKHNyYywga2V5LCBkZWZhdWx0VmFsdWUpID0+IHtcbiAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc3JjW2tleV0gPSBkZWZhdWx0VmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNyY1trZXldID0gZmFsc2U7XG4gICAgfVxuICB9LFxuICBjbGVhcjogKHNyYywga2V5KSA9PiB7XG4gICAgc3JjW2tleV0gPSBmYWxzZTtcbiAgfVxufSk7XG5cblR5cGVzLlN0cmluZyA9IGNyZWF0ZVR5cGUoe1xuICBiYXNlVHlwZTogU3RyaW5nLFxuICBpc1NpbXBsZVR5cGU6IHRydWUsXG4gIGNyZWF0ZTogZGVmYXVsdFZhbHVlID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiA/IGRlZmF1bHRWYWx1ZSA6IFwiXCI7XG4gIH0sXG4gIHJlc2V0OiAoc3JjLCBrZXksIGRlZmF1bHRWYWx1ZSkgPT4ge1xuICAgIGlmICh0eXBlb2YgZGVmYXVsdFZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBzcmNba2V5XSA9IGRlZmF1bHRWYWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3JjW2tleV0gPSBcIlwiO1xuICAgIH1cbiAgfSxcbiAgY2xlYXI6IChzcmMsIGtleSkgPT4ge1xuICAgIHNyY1trZXldID0gXCJcIjtcbiAgfVxufSk7XG5cblR5cGVzLkFycmF5ID0gY3JlYXRlVHlwZSh7XG4gIGJhc2VUeXBlOiBBcnJheSxcbiAgY3JlYXRlOiBkZWZhdWx0VmFsdWUgPT4ge1xuICAgIGlmICh0eXBlb2YgZGVmYXVsdFZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdFZhbHVlLnNsaWNlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtdO1xuICB9LFxuICByZXNldDogKHNyYywga2V5LCBkZWZhdWx0VmFsdWUpID0+IHtcbiAgICBpZiAodHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc3JjW2tleV0gPSBkZWZhdWx0VmFsdWUuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3JjW2tleV0ubGVuZ3RoID0gMDtcbiAgICB9XG4gIH0sXG4gIGNsZWFyOiAoc3JjLCBrZXkpID0+IHtcbiAgICBzcmNba2V5XS5sZW5ndGggPSAwO1xuICB9LFxuICBjb3B5OiAoc3JjLCBkc3QsIGtleSkgPT4ge1xuICAgIHNyY1trZXldID0gZHN0W2tleV0uc2xpY2UoKTtcbiAgfVxufSk7XG5cbmV4cG9ydCB7IFR5cGVzIH07XG4iLCJpbXBvcnQgeyBUeXBlcyB9IGZyb20gXCIuL1N0YW5kYXJkVHlwZXNcIjtcblxudmFyIHN0YW5kYXJkVHlwZXMgPSB7XG4gIG51bWJlcjogVHlwZXMuTnVtYmVyLFxuICBib29sZWFuOiBUeXBlcy5Cb29sZWFuLFxuICBzdHJpbmc6IFR5cGVzLlN0cmluZ1xufTtcblxuLyoqXG4gKiBUcnkgdG8gaW5mZXIgdGhlIHR5cGUgb2YgdGhlIHZhbHVlXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtTdHJpbmd9IFR5cGUgb2YgdGhlIGF0dHJpYnV0ZVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluZmVyVHlwZSh2YWx1ZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gVHlwZXMuQXJyYXk7XG4gIH1cblxuICBpZiAoc3RhbmRhcmRUeXBlc1t0eXBlb2YgdmFsdWVdKSB7XG4gICAgcmV0dXJuIHN0YW5kYXJkVHlwZXNbdHlwZW9mIHZhbHVlXTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgaW5mZXJUeXBlIH0gZnJvbSBcIi4vSW5mZXJUeXBlXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnRDbGFzcyhzY2hlbWEsIG5hbWUpIHtcbiAgLy92YXIgQ29tcG9uZW50ID0gbmV3IEZ1bmN0aW9uKGByZXR1cm4gZnVuY3Rpb24gJHtuYW1lfSgpIHt9YCkoKTtcbiAgZm9yIChsZXQga2V5IGluIHNjaGVtYSkge1xuICAgIGxldCB0eXBlID0gc2NoZW1hW2tleV0udHlwZTtcbiAgICBpZiAoIXR5cGUpIHtcbiAgICAgIHNjaGVtYVtrZXldLnR5cGUgPSBpbmZlclR5cGUoc2NoZW1hW2tleV0uZGVmYXVsdCk7XG4gICAgfVxuICB9XG5cbiAgdmFyIENvbXBvbmVudCA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAobGV0IGtleSBpbiBzY2hlbWEpIHtcbiAgICAgIHZhciBhdHRyID0gc2NoZW1hW2tleV07XG4gICAgICBsZXQgdHlwZSA9IGF0dHIudHlwZTtcbiAgICAgIGlmICh0eXBlICYmIHR5cGUuaXNUeXBlKSB7XG4gICAgICAgIHRoaXNba2V5XSA9IHR5cGUuY3JlYXRlKGF0dHIuZGVmYXVsdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzW2tleV0gPSBhdHRyLmRlZmF1bHQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGlmICh0eXBlb2YgbmFtZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb21wb25lbnQsIFwibmFtZVwiLCB7IHZhbHVlOiBuYW1lIH0pO1xuICB9XG5cbiAgQ29tcG9uZW50LnByb3RvdHlwZS5zY2hlbWEgPSBzY2hlbWE7XG5cbiAgdmFyIGtub3duVHlwZXMgPSB0cnVlO1xuICBmb3IgKGxldCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgdmFyIGF0dHIgPSBzY2hlbWFba2V5XTtcbiAgICBpZiAoIWF0dHIudHlwZSkge1xuICAgICAgYXR0ci50eXBlID0gaW5mZXJUeXBlKGF0dHIuZGVmYXVsdCk7XG4gICAgfVxuXG4gICAgdmFyIHR5cGUgPSBhdHRyLnR5cGU7XG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFVua25vd24gdHlwZSBkZWZpbml0aW9uIGZvciBhdHRyaWJ1dGUgJyR7a2V5fSdgKTtcbiAgICAgIGtub3duVHlwZXMgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWtub3duVHlwZXMpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBgVGhpcyBjb21wb25lbnQgY2FuJ3QgdXNlIHBvb2xpbmcgYmVjYXVzZSBzb21lIGRhdGEgdHlwZXMgYXJlIG5vdCByZWdpc3RlcmVkLiBQbGVhc2UgcHJvdmlkZSBhIHR5cGUgY3JlYXRlZCB3aXRoICdjcmVhdGVUeXBlJ2BcbiAgICApO1xuXG4gICAgZm9yICh2YXIga2V5IGluIHNjaGVtYSkge1xuICAgICAgbGV0IGF0dHIgPSBzY2hlbWFba2V5XTtcbiAgICAgIENvbXBvbmVudC5wcm90b3R5cGVba2V5XSA9IGF0dHIuZGVmYXVsdDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24oc3JjKSB7XG4gICAgICBmb3IgKGxldCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICAgIGlmIChzcmNba2V5XSkge1xuICAgICAgICAgIGxldCB0eXBlID0gc2NoZW1hW2tleV0udHlwZTtcbiAgICAgICAgICBpZiAodHlwZS5pc1NpbXBsZVR5cGUpIHtcbiAgICAgICAgICAgIHRoaXNba2V5XSA9IHNyY1trZXldO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZS5jb3B5KSB7XG4gICAgICAgICAgICB0eXBlLmNvcHkodGhpcywgc3JjLCBrZXkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBAdG9kbyBEZXRlY3QgdGhhdCBpdCdzIG5vdCBwb3NzaWJsZSB0byBjb3B5IGFsbCB0aGUgYXR0cmlidXRlc1xuICAgICAgICAgICAgLy8gYW5kIGp1c3QgYXZvaWQgY3JlYXRpbmcgdGhlIGNvcHkgZnVuY3Rpb25cbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgYFVua25vd24gY29weSBmdW5jdGlvbiBmb3IgYXR0cmlidXRlICcke2tleX0nIGRhdGEgdHlwZWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIENvbXBvbmVudC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAobGV0IGtleSBpbiBzY2hlbWEpIHtcbiAgICAgICAgbGV0IGF0dHIgPSBzY2hlbWFba2V5XTtcbiAgICAgICAgbGV0IHR5cGUgPSBhdHRyLnR5cGU7XG4gICAgICAgIGlmICh0eXBlLnJlc2V0KSB0eXBlLnJlc2V0KHRoaXMsIGtleSwgYXR0ci5kZWZhdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgZm9yIChsZXQga2V5IGluIHNjaGVtYSkge1xuICAgICAgICBsZXQgdHlwZSA9IHNjaGVtYVtrZXldLnR5cGU7XG4gICAgICAgIGlmICh0eXBlLmNsZWFyKSB0eXBlLmNsZWFyKHRoaXMsIGtleSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZvciAobGV0IGtleSBpbiBzY2hlbWEpIHtcbiAgICAgIGxldCBhdHRyID0gc2NoZW1hW2tleV07XG4gICAgICBsZXQgdHlwZSA9IGF0dHIudHlwZTtcbiAgICAgIENvbXBvbmVudC5wcm90b3R5cGVba2V5XSA9IGF0dHIuZGVmYXVsdDtcblxuICAgICAgaWYgKHR5cGUucmVzZXQpIHtcbiAgICAgICAgdHlwZS5yZXNldChDb21wb25lbnQucHJvdG90eXBlLCBrZXksIGF0dHIuZGVmYXVsdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIENvbXBvbmVudDtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUlkKGxlbmd0aCkge1xuICB2YXIgcmVzdWx0ID0gXCJcIjtcbiAgdmFyIGNoYXJhY3RlcnMgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMDEyMzQ1Njc4OVwiO1xuICB2YXIgY2hhcmFjdGVyc0xlbmd0aCA9IGNoYXJhY3RlcnMubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgcmVzdWx0ICs9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnNMZW5ndGgpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0U2NyaXB0KHNyYywgb25Mb2FkKSB7XG4gIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAvLyBAdG9kbyBVc2UgbGluayB0byB0aGUgZWNzeS1kZXZ0b29scyByZXBvP1xuICBzY3JpcHQuc3JjID0gc3JjO1xuICBzY3JpcHQub25sb2FkID0gb25Mb2FkO1xuICAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKHNjcmlwdCk7XG59XG4iLCIvKiBnbG9iYWwgUGVlciAqL1xuaW1wb3J0IHsgaW5qZWN0U2NyaXB0LCBnZW5lcmF0ZUlkIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcblxuZnVuY3Rpb24gaG9va0NvbnNvbGVBbmRFcnJvcnMoY29ubmVjdGlvbikge1xuICB2YXIgd3JhcEZ1bmN0aW9ucyA9IFtcImVycm9yXCIsIFwid2FybmluZ1wiLCBcImxvZ1wiXTtcbiAgd3JhcEZ1bmN0aW9ucy5mb3JFYWNoKGtleSA9PiB7XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlW2tleV0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdmFyIGZuID0gY29uc29sZVtrZXldLmJpbmQoY29uc29sZSk7XG4gICAgICBjb25zb2xlW2tleV0gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICBjb25uZWN0aW9uLnNlbmQoe1xuICAgICAgICAgIG1ldGhvZDogXCJjb25zb2xlXCIsXG4gICAgICAgICAgdHlwZToga2V5LFxuICAgICAgICAgIGFyZ3M6IEpTT04uc3RyaW5naWZ5KGFyZ3MpXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCBlcnJvciA9PiB7XG4gICAgY29ubmVjdGlvbi5zZW5kKHtcbiAgICAgIG1ldGhvZDogXCJlcnJvclwiLFxuICAgICAgZXJyb3I6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IuZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGVycm9yLmVycm9yLnN0YWNrXG4gICAgICB9KVxuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaW5jbHVkZVJlbW90ZUlkSFRNTChyZW1vdGVJZCkge1xuICBsZXQgaW5mb0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGluZm9EaXYuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMzMzM7XG4gICAgY29sb3I6ICNhYWE7XG4gICAgZGlzcGxheTpmbGV4O1xuICAgIGZvbnQtZmFtaWx5OiBBcmlhbDtcbiAgICBmb250LXNpemU6IDEuMWVtO1xuICAgIGhlaWdodDogNDBweDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBsZWZ0OiAwO1xuICAgIG9wYWNpdHk6IDAuOTtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcmlnaHQ6IDA7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHRvcDogMDtcbiAgYDtcblxuICBpbmZvRGl2LmlubmVySFRNTCA9IGBPcGVuIEVDU1kgZGV2dG9vbHMgdG8gY29ubmVjdCB0byB0aGlzIHBhZ2UgdXNpbmcgdGhlIGNvZGU6Jm5ic3A7PGIgc3R5bGU9XCJjb2xvcjogI2ZmZlwiPiR7cmVtb3RlSWR9PC9iPiZuYnNwOzxidXR0b24gb25DbGljaz1cImdlbmVyYXRlTmV3Q29kZSgpXCI+R2VuZXJhdGUgbmV3IGNvZGU8L2J1dHRvbj5gO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGluZm9EaXYpO1xuXG4gIHJldHVybiBpbmZvRGl2O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlUmVtb3RlRGV2dG9vbHMocmVtb3RlSWQpIHtcbiAgd2luZG93LmdlbmVyYXRlTmV3Q29kZSA9ICgpID0+IHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgcmVtb3RlSWQgPSBnZW5lcmF0ZUlkKDYpO1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImVjc3lSZW1vdGVJZFwiLCByZW1vdGVJZCk7XG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZChmYWxzZSk7XG4gIH07XG5cbiAgcmVtb3RlSWQgPSByZW1vdGVJZCB8fCB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJlY3N5UmVtb3RlSWRcIik7XG4gIGlmICghcmVtb3RlSWQpIHtcbiAgICByZW1vdGVJZCA9IGdlbmVyYXRlSWQoNik7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZWNzeVJlbW90ZUlkXCIsIHJlbW90ZUlkKTtcbiAgfVxuXG4gIGxldCBpbmZvRGl2ID0gaW5jbHVkZVJlbW90ZUlkSFRNTChyZW1vdGVJZCk7XG5cbiAgd2luZG93Ll9fRUNTWV9SRU1PVEVfREVWVE9PTFNfSU5KRUNURUQgPSB0cnVlO1xuICB3aW5kb3cuX19FQ1NZX1JFTU9URV9ERVZUT09MUyA9IHt9O1xuXG4gIGxldCBWZXJzaW9uID0gXCJcIjtcblxuICAvLyBUaGlzIGlzIHVzZWQgdG8gY29sbGVjdCB0aGUgd29ybGRzIGNyZWF0ZWQgYmVmb3JlIHRoZSBjb21tdW5pY2F0aW9uIGlzIGJlaW5nIGVzdGFibGlzaGVkXG4gIGxldCB3b3JsZHNCZWZvcmVMb2FkaW5nID0gW107XG4gIGxldCBvbldvcmxkQ3JlYXRlZCA9IGUgPT4ge1xuICAgIHZhciB3b3JsZCA9IGUuZGV0YWlsLndvcmxkO1xuICAgIFZlcnNpb24gPSBlLmRldGFpbC52ZXJzaW9uO1xuICAgIHdvcmxkc0JlZm9yZUxvYWRpbmcucHVzaCh3b3JsZCk7XG4gIH07XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZWNzeS13b3JsZC1jcmVhdGVkXCIsIG9uV29ybGRDcmVhdGVkKTtcblxuICBsZXQgb25Mb2FkZWQgPSAoKSA9PiB7XG4gICAgdmFyIHBlZXIgPSBuZXcgUGVlcihyZW1vdGVJZCk7XG4gICAgcGVlci5vbihcIm9wZW5cIiwgKC8qIGlkICovKSA9PiB7XG4gICAgICBwZWVyLm9uKFwiY29ubmVjdGlvblwiLCBjb25uZWN0aW9uID0+IHtcbiAgICAgICAgd2luZG93Ll9fRUNTWV9SRU1PVEVfREVWVE9PTFMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgICAgIGNvbm5lY3Rpb24ub24oXCJvcGVuXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIGluZm9EaXYuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgaW5mb0Rpdi5pbm5lckhUTUwgPSBcIkNvbm5lY3RlZFwiO1xuXG4gICAgICAgICAgLy8gUmVjZWl2ZSBtZXNzYWdlc1xuICAgICAgICAgIGNvbm5lY3Rpb24ub24oXCJkYXRhXCIsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09IFwiaW5pdFwiKSB7XG4gICAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHQvamF2YXNjcmlwdFwiKTtcbiAgICAgICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXG4gICAgICAgICAgICAgICAgLy8gT25jZSB0aGUgc2NyaXB0IGlzIGluamVjdGVkIHdlIGRvbid0IG5lZWQgdG8gbGlzdGVuXG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICBcImVjc3ktd29ybGQtY3JlYXRlZFwiLFxuICAgICAgICAgICAgICAgICAgb25Xb3JsZENyZWF0ZWRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHdvcmxkc0JlZm9yZUxvYWRpbmcuZm9yRWFjaCh3b3JsZCA9PiB7XG4gICAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJlY3N5LXdvcmxkLWNyZWF0ZWRcIiwge1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHsgd29ybGQ6IHdvcmxkLCB2ZXJzaW9uOiBWZXJzaW9uIH1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBzY3JpcHQuaW5uZXJIVE1MID0gZGF0YS5zY3JpcHQ7XG4gICAgICAgICAgICAgIChkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgc2NyaXB0Lm9ubG9hZCgpO1xuXG4gICAgICAgICAgICAgIGhvb2tDb25zb2xlQW5kRXJyb3JzKGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09IFwiZXhlY3V0ZVNjcmlwdFwiKSB7XG4gICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGV2YWwoZGF0YS5zY3JpcHQpO1xuICAgICAgICAgICAgICBpZiAoZGF0YS5yZXR1cm5FdmFsKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZW5kKHtcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJldmFsUmV0dXJuXCIsXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEluamVjdCBQZWVySlMgc2NyaXB0XG4gIGluamVjdFNjcmlwdChcbiAgICBcImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vcGVlcmpzQDAuMy4yMC9kaXN0L3BlZXIubWluLmpzXCIsXG4gICAgb25Mb2FkZWRcbiAgKTtcbn1cblxuY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcblxuLy8gQHRvZG8gUHJvdmlkZSBhIHdheSB0byBkaXNhYmxlIGl0IGlmIG5lZWRlZFxuaWYgKHVybFBhcmFtcy5oYXMoXCJlbmFibGUtcmVtb3RlLWRldnRvb2xzXCIpKSB7XG4gIGVuYWJsZVJlbW90ZURldnRvb2xzKCk7XG59XG4iXSwibmFtZXMiOlsiU3lzdGVtTWFuYWdlciIsIltvYmplY3QgT2JqZWN0XSIsIndvcmxkIiwidGhpcyIsIl9zeXN0ZW1zIiwiX2V4ZWN1dGVTeXN0ZW1zIiwibGFzdEV4ZWN1dGVkU3lzdGVtIiwiU3lzdGVtIiwiYXR0cmlidXRlcyIsInVuZGVmaW5lZCIsImZpbmQiLCJzIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiY29uc29sZSIsIndhcm4iLCJzeXN0ZW0iLCJpbml0Iiwib3JkZXIiLCJsZW5ndGgiLCJwdXNoIiwiZXhlY3V0ZSIsInNvcnRTeXN0ZW1zIiwic29ydCIsImEiLCJiIiwicHJpb3JpdHkiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJkZWx0YSIsInRpbWUiLCJpbml0aWFsaXplZCIsImNhbkV4ZWN1dGUiLCJzdGFydFRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsImV4ZWN1dGVUaW1lIiwiY2xlYXJFdmVudHMiLCJmb3JFYWNoIiwic3RvcCIsImZvcmNlUGxheSIsImVuYWJsZWQiLCJleGVjdXRlU3lzdGVtIiwic3RhdHMiLCJudW1TeXN0ZW1zIiwic3lzdGVtcyIsImkiLCJzeXN0ZW1TdGF0cyIsInF1ZXJpZXMiLCJjdHgiLCJFdmVudERpc3BhdGNoZXIiLCJfbGlzdGVuZXJzIiwiZmlyZWQiLCJoYW5kbGVkIiwiZXZlbnROYW1lIiwibGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lckFycmF5IiwiZW50aXR5IiwiY29tcG9uZW50IiwiYXJyYXkiLCJzbGljZSIsImNhbGwiLCJnZXROYW1lIiwiQ29tcG9uZW50IiwiY29tcG9uZW50UHJvcGVydHlOYW1lIiwicXVlcnlLZXkiLCJDb21wb25lbnRzIiwibmFtZXMiLCJuIiwiVCIsIm9wZXJhdG9yIiwiam9pbiIsIlF1ZXJ5IiwibWFuYWdlciIsIk5vdENvbXBvbmVudHMiLCJFcnJvciIsImVudGl0aWVzIiwiZXZlbnREaXNwYXRjaGVyIiwicmVhY3RpdmUiLCJrZXkiLCJfZW50aXRpZXMiLCJtYXRjaCIsImRpc3BhdGNoRXZlbnQiLCJwcm90b3R5cGUiLCJFTlRJVFlfQURERUQiLCJFTlRJVFlfUkVNT1ZFRCIsImhhc0FsbENvbXBvbmVudHMiLCJoYXNBbnlDb21wb25lbnRzIiwiY29tcG9uZW50cyIsImluY2x1ZGVkIiwibWFwIiwiQyIsIm5vdCIsIm51bUVudGl0aWVzIiwibnVtQ29tcG9uZW50cyIsIkNPTVBPTkVOVF9DSEFOR0VEIiwibmV4dElkIiwiRW50aXR5IiwiX3dvcmxkIiwiaWQiLCJfQ29tcG9uZW50VHlwZXMiLCJfY29tcG9uZW50cyIsIl9jb21wb25lbnRzVG9SZW1vdmUiLCJfQ29tcG9uZW50VHlwZXNUb1JlbW92ZSIsImFsaXZlIiwiaW5jbHVkZVJlbW92ZWQiLCJxdWVyeSIsInZhbHVlcyIsImVudGl0eUFkZENvbXBvbmVudCIsImZvcmNlUmVtb3ZlIiwiZW50aXR5UmVtb3ZlQ29tcG9uZW50IiwiaGFzUmVtb3ZlZENvbXBvbmVudCIsImhhc0NvbXBvbmVudCIsImVudGl0eVJlbW92ZUFsbENvbXBvbmVudHMiLCJyZW1vdmVFbnRpdHkiLCJPYmplY3RQb29sIiwiaW5pdGlhbFNpemUiLCJmcmVlTGlzdCIsImNvdW50IiwiaXNPYmplY3RQb29sIiwiZXh0cmFBcmdzIiwiYXJndW1lbnRzIiwiQXJyYXkiLCJzaGlmdCIsImNyZWF0ZUVsZW1lbnQiLCJleHBhbmQiLCJNYXRoIiwicm91bmQiLCJwb3AiLCJpdGVtIiwicmVzZXQiLCJRdWVyeU1hbmFnZXIiLCJfcXVlcmllcyIsInF1ZXJ5TmFtZSIsImFkZEVudGl0eSIsIlN5c3RlbVN0YXRlQ29tcG9uZW50IiwiaXNTeXN0ZW1TdGF0ZUNvbXBvbmVudCIsIkVudGl0eU1hbmFnZXIiLCJjb21wb25lbnRzTWFuYWdlciIsIl9lbnRpdGllc0J5TmFtZXMiLCJfcXVlcnlNYW5hZ2VyIiwiX2VudGl0eVBvb2wiLCJlbnRpdGllc1dpdGhDb21wb25lbnRzVG9SZW1vdmUiLCJlbnRpdGllc1RvUmVtb3ZlIiwiZGVmZXJyZWRSZW1vdmFsRW5hYmxlZCIsIm51bVN0YXRlQ29tcG9uZW50cyIsImFxdWlyZSIsIkVOVElUWV9DUkVBVEVEIiwiX19wcm90b19fIiwiZ2V0Q29tcG9uZW50c1Bvb2wiLCJjb3B5Iiwib25FbnRpdHlDb21wb25lbnRBZGRlZCIsImNvbXBvbmVudEFkZGVkVG9FbnRpdHkiLCJDT01QT05FTlRfQURERUQiLCJpbW1lZGlhdGVseSIsIkNPTVBPTkVOVF9SRU1PVkUiLCJfZW50aXR5UmVtb3ZlQ29tcG9uZW50U3luYyIsImNvbXBvbmVudE5hbWUiLCJvbkVudGl0eUNvbXBvbmVudFJlbW92ZWQiLCJyZW1vdmUiLCJwcm9wTmFtZSIsIl9jb21wb25lbnRQb29sIiwicmVsZWFzZSIsImNvbXBvbmVudFJlbW92ZWRGcm9tRW50aXR5IiwiaiIsIm9uRW50aXR5UmVtb3ZlZCIsIl9yZWxlYXNlRW50aXR5IiwiZ2V0UXVlcnkiLCJudW1RdWVyaWVzIiwiT2JqZWN0Iiwia2V5cyIsIm51bUNvbXBvbmVudFBvb2wiLCJjb21wb25lbnRQb29sIiwiY25hbWUiLCJwb29sIiwidXNlZCIsInRvdGFsVXNlZCIsInNpemUiLCJEdW1teU9iamVjdFBvb2wiLCJpc0R1bW15T2JqZWN0UG9vbCIsIkluZmluaXR5IiwiQ29tcG9uZW50TWFuYWdlciIsInJlZ2lzdGVyQ29tcG9uZW50IiwiVmVyc2lvbiIsInBqc29uIiwidmVyc2lvbiIsIldvcmxkIiwiZW50aXR5TWFuYWdlciIsInN5c3RlbU1hbmFnZXIiLCJldmVudFF1ZXVlcyIsIkN1c3RvbUV2ZW50IiwiZXZlbnQiLCJkZXRhaWwiLCJ3aW5kb3ciLCJsYXN0VGltZSIsInJlZ2lzdGVyU3lzdGVtIiwiU3lzdGVtQ2xhc3MiLCJnZXRTeXN0ZW0iLCJnZXRTeXN0ZW1zIiwicHJvY2Vzc0RlZmVycmVkUmVtb3ZhbCIsImNyZWF0ZUVudGl0eSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJfbWFuZGF0b3J5UXVlcmllcyIsInF1ZXJ5Q29uZmlnIiwicXVlcnlDb21wb25lbnRzIiwibWFuZGF0b3J5IiwicmVzdWx0cyIsImV2ZW50TWFwcGluZyIsImFkZGVkIiwicmVtb3ZlZCIsImNoYW5nZWQiLCJsaXN0ZW4iLCJldmVudExpc3QiLCJhZGRFdmVudExpc3RlbmVyIiwiaXNBcnJheSIsImNoYW5nZWRDb21wb25lbnQiLCJqc29uIiwicXVlcnlEZWZpbml0aW9uIiwianNvblF1ZXJ5IiwibWV0aG9kIiwiTm90IiwiaXNDb21wb25lbnQiLCJUYWdDb21wb25lbnQiLCJjcmVhdGVUeXBlIiwidHlwZURlZmluaXRpb24iLCJ1bmRlZmluZWRGdW5jdGlvbnMiLCJmaWx0ZXIiLCJmIiwiaXNUeXBlIiwiaXNUYWdDb21wb25lbnQiLCJUeXBlcyIsIk51bWJlciIsImJhc2VUeXBlIiwiaXNTaW1wbGVUeXBlIiwiY3JlYXRlIiwiZGVmYXVsdFZhbHVlIiwic3JjIiwiY2xlYXIiLCJCb29sZWFuIiwiU3RyaW5nIiwiZHN0Iiwic3RhbmRhcmRUeXBlcyIsIm51bWJlciIsImJvb2xlYW4iLCJzdHJpbmciLCJpbmZlclR5cGUiLCJ2YWx1ZSIsImNyZWF0ZUNvbXBvbmVudENsYXNzIiwic2NoZW1hIiwidHlwZSIsImRlZmF1bHQiLCJhdHRyIiwiZGVmaW5lUHJvcGVydHkiLCJrbm93blR5cGVzIiwiZ2VuZXJhdGVJZCIsInJlc3VsdCIsImNoYXJhY3RlcnMiLCJjaGFyYWN0ZXJzTGVuZ3RoIiwiY2hhckF0IiwiZmxvb3IiLCJyYW5kb20iLCJpbmplY3RTY3JpcHQiLCJvbkxvYWQiLCJzY3JpcHQiLCJkb2N1bWVudCIsIm9ubG9hZCIsImhlYWQiLCJkb2N1bWVudEVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImhvb2tDb25zb2xlQW5kRXJyb3JzIiwiY29ubmVjdGlvbiIsImZuIiwiYmluZCIsImFyZ3MiLCJzZW5kIiwiYXBwbHkiLCJlcnJvciIsIm1lc3NhZ2UiLCJzdGFjayIsImluY2x1ZGVSZW1vdGVJZEhUTUwiLCJyZW1vdGVJZCIsImluZm9EaXYiLCJzdHlsZSIsImNzc1RleHQiLCJpbm5lckhUTUwiLCJib2R5IiwiZW5hYmxlUmVtb3RlRGV2dG9vbHMiLCJnZW5lcmF0ZU5ld0NvZGUiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwibG9jYXRpb24iLCJyZWxvYWQiLCJnZXRJdGVtIiwiX19FQ1NZX1JFTU9URV9ERVZUT09MU19JTkpFQ1RFRCIsIl9fRUNTWV9SRU1PVEVfREVWVE9PTFMiLCJ3b3JsZHNCZWZvcmVMb2FkaW5nIiwib25Xb3JsZENyZWF0ZWQiLCJlIiwib25Mb2FkZWQiLCJwZWVyIiwiUGVlciIsIm9uIiwiZGF0YSIsInNldEF0dHJpYnV0ZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJl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
